(()=>{var e={};e.id=844,e.ids=[844],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},82888:(e,i,t)=>{"use strict";t.r(i),t.d(i,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{GET:()=>p});var r=t(49303),s=t(88716),a=t(60670),u=t(87070);let o=(0,t(72438).eI)("https://fzvtzzzsoccptvgihxfl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ6dnR6enpzb2NjcHR2Z2loeGZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNTAwNjksImV4cCI6MjA2NjcyNjA2OX0.UFY3vSerY963T2cqbgrhstgZfhkgfN5KN7lZUVZ8DLA");class l{static{this.fundingOpportunities=[{id:"kabbage-loc",lenderName:"Kabbage",productType:"line_of_credit",minAmount:1e3,maxAmount:25e4,interestRateMin:12,interestRateMax:36,termMonthsMin:6,termMonthsMax:24,minCreditScore:560,minTimeInBusiness:12,minAnnualRevenue:5e4,industryRestrictions:[],requiresCollateral:!1,requiresPersonalGuarantee:!0,avgApprovalTime:"1-2 days",fees:{originationFee:0,maintenanceFee:0,earlyPaymentPenalty:!1},features:["Fast approval","No collateral","Flexible payments"],applicationUrl:"https://kabbage.com/application",description:"Fast, flexible business line of credit with competitive rates",eligibilityScore:0,recommendationReason:"",rating:4.2,reviewCount:1248,promoted:!1},{id:"ondeck-term",lenderName:"OnDeck",productType:"term_loan",minAmount:5e3,maxAmount:5e5,interestRateMin:15,interestRateMax:42,termMonthsMin:3,termMonthsMax:36,minCreditScore:600,minTimeInBusiness:12,minAnnualRevenue:1e5,industryRestrictions:["adult_entertainment","gambling"],requiresCollateral:!1,requiresPersonalGuarantee:!0,avgApprovalTime:"1-3 days",fees:{originationFee:2.5,earlyPaymentPenalty:!1},features:["Quick funding","No collateral","Transparent pricing"],applicationUrl:"https://ondeck.com/apply",description:"Term loans for established businesses with transparent pricing",eligibilityScore:0,recommendationReason:"",rating:4,reviewCount:892,promoted:!0},{id:"sba-loan",lenderName:"SBA Preferred Lender",productType:"sba_loan",minAmount:25e3,maxAmount:5e6,interestRateMin:6,interestRateMax:13,termMonthsMin:12,termMonthsMax:300,minCreditScore:680,minTimeInBusiness:24,minAnnualRevenue:15e4,industryRestrictions:["adult_entertainment","gambling","speculation"],requiresCollateral:!0,requiresPersonalGuarantee:!0,avgApprovalTime:"4-8 weeks",fees:{originationFee:1.5,maintenanceFee:0},features:["Low interest rates","Long terms","SBA guaranteed"],applicationUrl:"https://sba.gov/funding-programs/loans",description:"SBA guaranteed loans with the best rates and terms",eligibilityScore:0,recommendationReason:"",rating:4.5,reviewCount:445,promoted:!1}]}static{this.tradeLineOpportunities=[{id:"uline-supplies",vendorName:"Uline",category:"office_supplies",serviceType:"Office & Warehouse Supplies",creditReportingBureaus:["experian","equifax","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:0,annualRevenueMin:0,industryRestrictions:[],creditLimit:{min:500,max:5e4,typical:5e3},paymentTerms:"Net 30",benefits:["Builds business credit","No personal guarantee","Easy approval"],fees:{setupFee:0,annualFee:0},applicationUrl:"https://uline.com/Account/CreditApplication",description:"Business supplies with excellent credit reporting to all bureaus",eligibilityScore:0,creditBuildingImpact:"high",recommendationReason:"",rating:4.6,reviewCount:2341,promoted:!0,estimatedCreditImpact:"+10-20 points in 3-6 months"},{id:"grainger-supplies",vendorName:"Grainger",category:"office_supplies",serviceType:"Industrial & Business Supplies",creditReportingBureaus:["experian","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:6,annualRevenueMin:25e3,industryRestrictions:[],creditLimit:{min:1e3,max:1e5,typical:1e4},paymentTerms:"Net 30",benefits:["Strong credit reporting","High credit limits","Industry leader"],fees:{setupFee:0,annualFee:0},applicationUrl:"https://grainger.com/credit-application",description:"Industrial supplies with strong credit reporting history",eligibilityScore:0,creditBuildingImpact:"high",recommendationReason:"",rating:4.4,reviewCount:1876,promoted:!1,estimatedCreditImpact:"+8-15 points in 4-6 months"},{id:"fleet-fuel",vendorName:"Fleet Fuel Cards",category:"fuel",serviceType:"Business Fuel Cards",creditReportingBureaus:["experian","equifax"],reportingFrequency:"monthly",minCreditScore:550,timeInBusinessMin:3,annualRevenueMin:5e4,industryRestrictions:[],creditLimit:{min:2e3,max:25e3,typical:7500},paymentTerms:"Net 15",benefits:["Fleet management","Credit building","Expense tracking"],fees:{setupFee:0,annualFee:25,transactionFee:0},applicationUrl:"https://fleetfuel.com/apply",description:"Fuel cards that build credit while managing fleet expenses",eligibilityScore:0,creditBuildingImpact:"medium",recommendationReason:"",rating:4.1,reviewCount:892,promoted:!1,estimatedCreditImpact:"+5-12 points in 3-6 months"},{id:"net30-accounts",vendorName:"Net 30 Vendor Network",category:"professional_services",serviceType:"Net 30 Vendor Accounts",creditReportingBureaus:["experian","equifax","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:0,annualRevenueMin:0,industryRestrictions:[],creditLimit:{min:250,max:5e3,typical:1500},paymentTerms:"Net 30",benefits:["Starter trade lines","Easy approval","Multiple vendors"],fees:{setupFee:89,annualFee:0},applicationUrl:"https://net30vendors.com/apply",description:"Starter trade lines perfect for new businesses building credit",eligibilityScore:0,creditBuildingImpact:"medium",recommendationReason:"",rating:4,reviewCount:634,promoted:!1,estimatedCreditImpact:"+3-8 points in 2-4 months"}]}static getMatchedFundingOpportunities(e){return this.fundingOpportunities.map(i=>({...i,eligibilityScore:this.calculateFundingEligibility(i,e),recommendationReason:this.generateFundingRecommendation(i,e)})).filter(e=>e.eligibilityScore>20).sort((e,i)=>i.eligibilityScore-e.eligibilityScore)}static getMatchedTradeLineOpportunities(e){return this.tradeLineOpportunities.map(i=>({...i,eligibilityScore:this.calculateTradeLineEligibility(i,e),recommendationReason:this.generateTradeLineRecommendation(i,e)})).filter(e=>e.eligibilityScore>30).sort((e,i)=>i.eligibilityScore-e.eligibilityScore)}static calculateFundingEligibility(e,i){let t=0;return i.creditScore>=e.minCreditScore+50?t+=30:i.creditScore>=e.minCreditScore+20?t+=20:i.creditScore>=e.minCreditScore&&(t+=10),i.timeInBusiness>=2*e.minTimeInBusiness?t+=20:i.timeInBusiness>=e.minTimeInBusiness&&(t+=10),i.annualRevenue>=3*e.minAnnualRevenue?t+=25:i.annualRevenue>=2*e.minAnnualRevenue?t+=20:i.annualRevenue>=e.minAnnualRevenue&&(t+=15),e.industryRestrictions.includes(i.industry)||(t+=10),i.fundabilityScore>=80?t+=15:i.fundabilityScore>=60?t+=10:i.fundabilityScore>=40&&(t+=5),Math.min(t,100)}static calculateTradeLineEligibility(e,i){let t=0;return i.creditScore>=e.minCreditScore+100?t+=25:i.creditScore>=e.minCreditScore+50?t+=20:i.creditScore>=e.minCreditScore&&(t+=15),i.timeInBusiness>=2*e.timeInBusinessMin?t+=20:i.timeInBusiness>=e.timeInBusinessMin&&(t+=15),i.annualRevenue>=3*e.annualRevenueMin?t+=20:i.annualRevenue>=2*e.annualRevenueMin?t+=15:i.annualRevenue>=e.annualRevenueMin&&(t+=10),e.industryRestrictions.includes(i.industry)||(t+=15),"high"===e.creditBuildingImpact?t+=20:"medium"===e.creditBuildingImpact?t+=15:t+=10,Math.min(t,100)}static generateFundingRecommendation(e,i){let t=[];return i.creditScore>=e.minCreditScore+50&&t.push("Excellent credit score match"),i.annualRevenue>=2*e.minAnnualRevenue&&t.push("Strong revenue qualification"),i.timeInBusiness>=2*e.minTimeInBusiness&&t.push("Well-established business"),e.promoted&&t.push("Featured lender partner"),t.length>0?t.join(", "):"Good potential match for your business"}static generateTradeLineRecommendation(e,i){let t=[];return"high"===e.creditBuildingImpact&&t.push("High credit building impact"),e.creditReportingBureaus.length>=3&&t.push("Reports to all major bureaus"),0===e.fees.setupFee&&t.push("No setup fees"),i.currentTradeLines.length<3&&t.push("Perfect for building credit foundation"),t.length>0?t.join(", "):"Good opportunity for credit building"}}class c extends l{static async getUserProfile(e){try{let{data:i}=await o.from("user_profiles").select("*").eq("id",e).single();if(!i)return null;let{data:t}=await o.from("business_profiles").select("*").eq("user_id",e).single(),{data:n}=await o.from("advanced_fundability_assessments").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();return{id:e,email:i.email||"",creditScore:i.fundability_score||0,timeInBusiness:t?.years_in_business||0,annualRevenue:t?.annual_revenue||0,industry:t?.industry||"",businessStructure:t?.business_structure||"",fundingNeeds:{amount:1e5,purpose:"Working Capital",timeline:"30 days"},currentTradeLines:[],fundabilityScore:n?.overall_score||0,businessProfile:t,latestAssessment:n}}catch(e){return console.error("Error fetching user profile:",e),null}}static async getPersonalizedFundingOpportunities(e){let i=await this.getUserProfile(e);return i?this.getMatchedFundingOpportunities(i).map(e=>({...e,matchAnalysis:this.calculateAdvancedFundingMatch(e,i)})).sort((e,i)=>i.matchAnalysis.score-e.matchAnalysis.score):[]}static async getPersonalizedTradelineOpportunities(e){let i=await this.getUserProfile(e);return i?this.getMatchedTradeLineOpportunities(i).map(e=>({...e,matchAnalysis:this.calculateAdvancedTradelineMatch(e,i)})).sort((e,i)=>i.matchAnalysis.score-e.matchAnalysis.score):[]}static calculateAdvancedFundingMatch(e,i){let t=0,n=[],r=[],s=[],a=[];i.fundabilityScore>=e.minCreditScore+100?(t+=30,n.push("Excellent credit profile for this lender")):i.fundabilityScore>=e.minCreditScore+50?(t+=25,n.push("Strong credit qualification")):i.fundabilityScore>=e.minCreditScore?(t+=15,n.push("Meets minimum credit requirements")):(r.push("Credit score below minimum requirement"),s.push("Focus on improving fundability score first"));let u=i.annualRevenue/e.minAnnualRevenue;u>=3?(t+=25,n.push("Revenue significantly exceeds requirements")):u>=2?(t+=20,n.push("Strong revenue qualification")):u>=1?(t+=15,n.push("Meets revenue requirements")):(r.push("Revenue below minimum requirement"),s.push("Consider revenue-based financing options"));let o=12*i.timeInBusiness/e.minTimeInBusiness;o>=2?(t+=20,n.push("Well-established business history")):o>=1?(t+=15,n.push("Meets time in business requirement")):(r.push("Business too new for this lender"),s.push("Consider new business financing options")),e.industryRestrictions.includes(i.industry)?r.push("Industry restrictions may apply"):(t+=10,n.push("Industry approved by lender"));let l=i.fundingNeeds.amount;l>=e.minAmount&&l<=e.maxAmount?(t+=15,n.push("Loan amount within lender range")):l<e.minAmount?(t+=5,r.push("Requested amount below minimum"),s.push("Consider increasing loan amount or finding alternative lenders")):(r.push("Requested amount exceeds maximum"),s.push("Consider multiple funding sources")),t>=80?(a.push("Apply immediately - excellent match"),a.push("Prepare financial documents"),a.push("Review loan terms carefully")):t>=60?(a.push("Review application requirements"),a.push("Address any concerns first"),a.push("Prepare strong application package")):(a.push("Improve fundability score"),a.push("Consider alternative lenders"),a.push("Work on business metrics"));let c="low";return r.length>=3?c="high":r.length>=1&&(c="medium"),{score:Math.min(t,100),strengths:n,concerns:r,recommendations:s,nextSteps:a,riskLevel:c}}static calculateAdvancedTradelineMatch(e,i){let t=0,n=[],r=[],s=[],a=[];"high"===e.creditBuildingImpact?(t+=30,n.push("High credit building potential")):"medium"===e.creditBuildingImpact?(t+=20,n.push("Moderate credit building impact")):t+=10;let u=e.creditReportingBureaus.length;u>=3?(t+=25,n.push("Reports to all major credit bureaus")):u>=2?(t+=20,n.push("Reports to multiple bureaus")):t+=15,i.fundabilityScore>=e.minCreditScore+50?(t+=20,n.push("Excellent qualification profile")):i.fundabilityScore>=e.minCreditScore?(t+=15,n.push("Meets qualification requirements")):(t+=5,r.push("May need to improve credit first")),12*i.timeInBusiness>=2*e.timeInBusinessMin?(t+=15,n.push("Well-established for this tradeline")):12*i.timeInBusiness>=e.timeInBusinessMin?(t+=10,n.push("Meets time requirements")):r.push("Business may be too new"),0===e.fees.setupFee?(t+=10,n.push("No setup fees required")):100>(e.fees.setupFee||0)?(t+=7,n.push("Low setup costs")):(t+=3,r.push("Higher setup fees required")),"high"===e.creditBuildingImpact&&s.push("Prioritize this tradeline for maximum impact"),i.fundabilityScore<60?(s.push("Start with easier approval tradelines"),a.push("Apply for starter business accounts")):a.push("Apply for multiple accounts for faster building"),a.push("Ensure timely payments for maximum benefit"),a.push("Monitor credit reports monthly");let o="low";return r.length>=2?o="high":r.length>=1&&(o="medium"),{score:Math.min(t,100),strengths:n,concerns:r,recommendations:s,nextSteps:a,riskLevel:o}}static async saveFundingMatches(e,i){try{let t=i.map(i=>({user_id:e,funding_opportunity_id:i.id,match_score:i.eligibilityScore,is_prequalified:i.eligibilityScore>=70,created_at:new Date().toISOString()}));await o.from("user_funding_matches").upsert(t,{onConflict:"user_id,funding_opportunity_id"})}catch(e){console.error("Error saving funding matches:",e)}}static async trackOpportunityView(e,i,t){try{await o.from("marketplace_analytics").insert({user_id:e,opportunity_id:i,opportunity_type:t,action:"view"})}catch(e){console.error("Error tracking view:",e)}}static async trackOpportunityApplication(e,i,t){try{await o.from("marketplace_analytics").insert({user_id:e,opportunity_id:i,opportunity_type:t,action:"apply"}),"funding"===t&&await o.from("funding_applications").insert({user_id:e,opportunity_id:i,status:"applied",applied_at:new Date().toISOString()})}catch(e){console.error("Error tracking application:",e)}}}async function p(e){try{let i;let{searchParams:t}=new URL(e.url),n=t.get("type"),r=t.get("userId");if(!r)return u.NextResponse.json({success:!1,error:"User ID required"},{status:400});if("funding"===n)i=await c.getPersonalizedFundingOpportunities(r);else{if("tradelines"!==n)return u.NextResponse.json({success:!1,error:"Invalid type"},{status:400});i=await c.getPersonalizedTradelineOpportunities(r)}return u.NextResponse.json({success:!0,opportunities:i,count:i.length})}catch(e){return console.error("Error fetching opportunities:",e),u.NextResponse.json({success:!1,error:"Failed to fetch opportunities"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/marketplace/opportunities/route",pathname:"/api/marketplace/opportunities",filename:"route",bundlePath:"app/api/marketplace/opportunities/route"},resolvedPagePath:"C:\\Users\\dondr\\ybw-funds-platform\\ybw-funds-platform\\src\\app\\api\\marketplace\\opportunities\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h}=d,y="/api/marketplace/opportunities/route";function f(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var i=require("../../../../webpack-runtime.js");i.C(e);var t=e=>i(i.s=e),n=i.X(0,[276,169],()=>t(82888));module.exports=n})();