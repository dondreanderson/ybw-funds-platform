(()=>{var e={};e.id=515,e.ids=[515],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},89810:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>_,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>c});var n=t(49303),i=t(88716),a=t(60670),o=t(87070);let u=(0,t(72438).eI)("https://fzvtzzzsoccptvgihxfl.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("assessmentId"),s=r.get("userId");if(!t||!s)return o.NextResponse.json({error:"Assessment ID and User ID are required"},{status:400});let{data:n,error:i}=await u.from("advanced_fundability_assessments").select("*").eq("id",t).eq("user_id",s).single();if(i||!n)return o.NextResponse.json({error:"Assessment not found"},{status:404});let{data:a,error:c}=await u.from("assessment_recommendations").select("*").eq("assessment_id",t).order("priority",{ascending:!0});if(c)return console.error("Error fetching recommendations:",c),o.NextResponse.json({error:"Failed to fetch recommendations"},{status:500});let{data:d}=await u.from("industry_benchmarks").select("*").eq("industry_name",n.metadata?.form_data?.industry).single(),p={business_registration:"avg_business_registration",credit_profile:"avg_credit_profile",financial_documentation:"avg_financial_documentation",operational_infrastructure:"avg_operational_infrastructure",online_presence:"avg_online_presence",risk_compliance:"avg_risk_compliance"},m=a?.map(e=>{if(!d)return e;let r=String(e.category_id),t=p[r];if(t&&void 0!==d[t]){let s=d[t],i=n.category_scores?.[r]||n.metadata?.category_scores?.[r]||n.metadata?.[r]||0;return{...e,industry_comparison:{industry_average:s,user_score:i,percentile_rank:i>=1.5*s?90:i>=1.25*s?75:i>=s?50:i>=.75*s?25:10}}}return e})||[];return o.NextResponse.json({success:!0,data:{assessment:n,recommendations:m,industry_benchmark:d}})}catch(e){return console.error("API error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/fundability/get-recommendations/route",pathname:"/api/fundability/get-recommendations",filename:"route",bundlePath:"app/api/fundability/get-recommendations/route"},resolvedPagePath:"C:\\Users\\dondr\\ybw-funds-platform\\ybw-funds-platform\\src\\app\\api\\fundability\\get-recommendations\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:l}=d,_="/api/fundability/get-recommendations/route";function f(){return(0,a.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:m})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,169],()=>t(89810));module.exports=s})();