(()=>{var e={};e.id=240,e.ids=[240],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},8369:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(21642),s(15495),s(35866);var r=s(23191),i=s(88716),n=s(37922),a=s.n(n),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["marketplace",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21642)),"C:\\Users\\dondr\\ybw-funds-platform\\ybw-funds-platform\\src\\app\\marketplace\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,15495)),"C:\\Users\\dondr\\ybw-funds-platform\\ybw-funds-platform\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\dondr\\ybw-funds-platform\\ybw-funds-platform\\src\\app\\marketplace\\page.tsx"],m="/marketplace/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/marketplace/page",pathname:"/marketplace",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},73143:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},14464:(e,t,s)=>{Promise.resolve().then(s.bind(s,42126)),Promise.resolve().then(s.bind(s,27345))},84226:(e,t,s)=>{Promise.resolve().then(s.bind(s,42065))},42126:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(10326),i=s(77109),n=s(27345);function a({children:e}){return r.jsx(i.SessionProvider,{children:r.jsx(n.AssessmentProvider,{children:e})})}},42065:(e,t,s)=>{"use strict";s.d(t,{MarketplaceDashboard:()=>m});var r=s(10326),i=s(17577),n=s(77109),a=s(2777);class l{static{this.fundingOpportunities=[{id:"kabbage-loc",lenderName:"Kabbage",productType:"line_of_credit",minAmount:1e3,maxAmount:25e4,interestRateMin:12,interestRateMax:36,termMonthsMin:6,termMonthsMax:24,minCreditScore:560,minTimeInBusiness:12,minAnnualRevenue:5e4,industryRestrictions:[],requiresCollateral:!1,requiresPersonalGuarantee:!0,avgApprovalTime:"1-2 days",fees:{originationFee:0,maintenanceFee:0,earlyPaymentPenalty:!1},features:["Fast approval","No collateral","Flexible payments"],applicationUrl:"https://kabbage.com/application",description:"Fast, flexible business line of credit with competitive rates",eligibilityScore:0,recommendationReason:"",rating:4.2,reviewCount:1248,promoted:!1},{id:"ondeck-term",lenderName:"OnDeck",productType:"term_loan",minAmount:5e3,maxAmount:5e5,interestRateMin:15,interestRateMax:42,termMonthsMin:3,termMonthsMax:36,minCreditScore:600,minTimeInBusiness:12,minAnnualRevenue:1e5,industryRestrictions:["adult_entertainment","gambling"],requiresCollateral:!1,requiresPersonalGuarantee:!0,avgApprovalTime:"1-3 days",fees:{originationFee:2.5,earlyPaymentPenalty:!1},features:["Quick funding","No collateral","Transparent pricing"],applicationUrl:"https://ondeck.com/apply",description:"Term loans for established businesses with transparent pricing",eligibilityScore:0,recommendationReason:"",rating:4,reviewCount:892,promoted:!0},{id:"sba-loan",lenderName:"SBA Preferred Lender",productType:"sba_loan",minAmount:25e3,maxAmount:5e6,interestRateMin:6,interestRateMax:13,termMonthsMin:12,termMonthsMax:300,minCreditScore:680,minTimeInBusiness:24,minAnnualRevenue:15e4,industryRestrictions:["adult_entertainment","gambling","speculation"],requiresCollateral:!0,requiresPersonalGuarantee:!0,avgApprovalTime:"4-8 weeks",fees:{originationFee:1.5,maintenanceFee:0},features:["Low interest rates","Long terms","SBA guaranteed"],applicationUrl:"https://sba.gov/funding-programs/loans",description:"SBA guaranteed loans with the best rates and terms",eligibilityScore:0,recommendationReason:"",rating:4.5,reviewCount:445,promoted:!1}]}static{this.tradeLineOpportunities=[{id:"uline-supplies",vendorName:"Uline",category:"office_supplies",serviceType:"Office & Warehouse Supplies",creditReportingBureaus:["experian","equifax","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:0,annualRevenueMin:0,industryRestrictions:[],creditLimit:{min:500,max:5e4,typical:5e3},paymentTerms:"Net 30",benefits:["Builds business credit","No personal guarantee","Easy approval"],fees:{setupFee:0,annualFee:0},applicationUrl:"https://uline.com/Account/CreditApplication",description:"Business supplies with excellent credit reporting to all bureaus",eligibilityScore:0,creditBuildingImpact:"high",recommendationReason:"",rating:4.6,reviewCount:2341,promoted:!0,estimatedCreditImpact:"+10-20 points in 3-6 months"},{id:"grainger-supplies",vendorName:"Grainger",category:"office_supplies",serviceType:"Industrial & Business Supplies",creditReportingBureaus:["experian","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:6,annualRevenueMin:25e3,industryRestrictions:[],creditLimit:{min:1e3,max:1e5,typical:1e4},paymentTerms:"Net 30",benefits:["Strong credit reporting","High credit limits","Industry leader"],fees:{setupFee:0,annualFee:0},applicationUrl:"https://grainger.com/credit-application",description:"Industrial supplies with strong credit reporting history",eligibilityScore:0,creditBuildingImpact:"high",recommendationReason:"",rating:4.4,reviewCount:1876,promoted:!1,estimatedCreditImpact:"+8-15 points in 4-6 months"},{id:"fleet-fuel",vendorName:"Fleet Fuel Cards",category:"fuel",serviceType:"Business Fuel Cards",creditReportingBureaus:["experian","equifax"],reportingFrequency:"monthly",minCreditScore:550,timeInBusinessMin:3,annualRevenueMin:5e4,industryRestrictions:[],creditLimit:{min:2e3,max:25e3,typical:7500},paymentTerms:"Net 15",benefits:["Fleet management","Credit building","Expense tracking"],fees:{setupFee:0,annualFee:25,transactionFee:0},applicationUrl:"https://fleetfuel.com/apply",description:"Fuel cards that build credit while managing fleet expenses",eligibilityScore:0,creditBuildingImpact:"medium",recommendationReason:"",rating:4.1,reviewCount:892,promoted:!1,estimatedCreditImpact:"+5-12 points in 3-6 months"},{id:"net30-accounts",vendorName:"Net 30 Vendor Network",category:"professional_services",serviceType:"Net 30 Vendor Accounts",creditReportingBureaus:["experian","equifax","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:0,annualRevenueMin:0,industryRestrictions:[],creditLimit:{min:250,max:5e3,typical:1500},paymentTerms:"Net 30",benefits:["Starter trade lines","Easy approval","Multiple vendors"],fees:{setupFee:89,annualFee:0},applicationUrl:"https://net30vendors.com/apply",description:"Starter trade lines perfect for new businesses building credit",eligibilityScore:0,creditBuildingImpact:"medium",recommendationReason:"",rating:4,reviewCount:634,promoted:!1,estimatedCreditImpact:"+3-8 points in 2-4 months"}]}static getMatchedFundingOpportunities(e){return this.fundingOpportunities.map(t=>({...t,eligibilityScore:this.calculateFundingEligibility(t,e),recommendationReason:this.generateFundingRecommendation(t,e)})).filter(e=>e.eligibilityScore>20).sort((e,t)=>t.eligibilityScore-e.eligibilityScore)}static getMatchedTradeLineOpportunities(e){return this.tradeLineOpportunities.map(t=>({...t,eligibilityScore:this.calculateTradeLineEligibility(t,e),recommendationReason:this.generateTradeLineRecommendation(t,e)})).filter(e=>e.eligibilityScore>30).sort((e,t)=>t.eligibilityScore-e.eligibilityScore)}static calculateFundingEligibility(e,t){let s=0;return t.creditScore>=e.minCreditScore+50?s+=30:t.creditScore>=e.minCreditScore+20?s+=20:t.creditScore>=e.minCreditScore&&(s+=10),t.timeInBusiness>=2*e.minTimeInBusiness?s+=20:t.timeInBusiness>=e.minTimeInBusiness&&(s+=10),t.annualRevenue>=3*e.minAnnualRevenue?s+=25:t.annualRevenue>=2*e.minAnnualRevenue?s+=20:t.annualRevenue>=e.minAnnualRevenue&&(s+=15),e.industryRestrictions.includes(t.industry)||(s+=10),t.fundabilityScore>=80?s+=15:t.fundabilityScore>=60?s+=10:t.fundabilityScore>=40&&(s+=5),Math.min(s,100)}static calculateTradeLineEligibility(e,t){let s=0;return t.creditScore>=e.minCreditScore+100?s+=25:t.creditScore>=e.minCreditScore+50?s+=20:t.creditScore>=e.minCreditScore&&(s+=15),t.timeInBusiness>=2*e.timeInBusinessMin?s+=20:t.timeInBusiness>=e.timeInBusinessMin&&(s+=15),t.annualRevenue>=3*e.annualRevenueMin?s+=20:t.annualRevenue>=2*e.annualRevenueMin?s+=15:t.annualRevenue>=e.annualRevenueMin&&(s+=10),e.industryRestrictions.includes(t.industry)||(s+=15),"high"===e.creditBuildingImpact?s+=20:"medium"===e.creditBuildingImpact?s+=15:s+=10,Math.min(s,100)}static generateFundingRecommendation(e,t){let s=[];return t.creditScore>=e.minCreditScore+50&&s.push("Excellent credit score match"),t.annualRevenue>=2*e.minAnnualRevenue&&s.push("Strong revenue qualification"),t.timeInBusiness>=2*e.minTimeInBusiness&&s.push("Well-established business"),e.promoted&&s.push("Featured lender partner"),s.length>0?s.join(", "):"Good potential match for your business"}static generateTradeLineRecommendation(e,t){let s=[];return"high"===e.creditBuildingImpact&&s.push("High credit building impact"),e.creditReportingBureaus.length>=3&&s.push("Reports to all major bureaus"),0===e.fees.setupFee&&s.push("No setup fees"),t.currentTradeLines.length<3&&s.push("Perfect for building credit foundation"),s.length>0?s.join(", "):"Good opportunity for credit building"}}class o extends l{static async getUserProfile(e){try{let{data:t}=await a.O.from("user_profiles").select("*").eq("id",e).single();if(!t)return null;let{data:s}=await a.O.from("business_profiles").select("*").eq("user_id",e).single(),{data:r}=await a.O.from("advanced_fundability_assessments").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();return{id:e,email:t.email||"",creditScore:t.fundability_score||0,timeInBusiness:s?.years_in_business||0,annualRevenue:s?.annual_revenue||0,industry:s?.industry||"",businessStructure:s?.business_structure||"",fundingNeeds:{amount:1e5,purpose:"Working Capital",timeline:"30 days"},currentTradeLines:[],fundabilityScore:r?.overall_score||0,businessProfile:s,latestAssessment:r}}catch(e){return console.error("Error fetching user profile:",e),null}}static async getPersonalizedFundingOpportunities(e){let t=await this.getUserProfile(e);return t?this.getMatchedFundingOpportunities(t).map(e=>({...e,matchAnalysis:this.calculateAdvancedFundingMatch(e,t)})).sort((e,t)=>t.matchAnalysis.score-e.matchAnalysis.score):[]}static async getPersonalizedTradelineOpportunities(e){let t=await this.getUserProfile(e);return t?this.getMatchedTradeLineOpportunities(t).map(e=>({...e,matchAnalysis:this.calculateAdvancedTradelineMatch(e,t)})).sort((e,t)=>t.matchAnalysis.score-e.matchAnalysis.score):[]}static calculateAdvancedFundingMatch(e,t){let s=0,r=[],i=[],n=[],a=[];t.fundabilityScore>=e.minCreditScore+100?(s+=30,r.push("Excellent credit profile for this lender")):t.fundabilityScore>=e.minCreditScore+50?(s+=25,r.push("Strong credit qualification")):t.fundabilityScore>=e.minCreditScore?(s+=15,r.push("Meets minimum credit requirements")):(i.push("Credit score below minimum requirement"),n.push("Focus on improving fundability score first"));let l=t.annualRevenue/e.minAnnualRevenue;l>=3?(s+=25,r.push("Revenue significantly exceeds requirements")):l>=2?(s+=20,r.push("Strong revenue qualification")):l>=1?(s+=15,r.push("Meets revenue requirements")):(i.push("Revenue below minimum requirement"),n.push("Consider revenue-based financing options"));let o=12*t.timeInBusiness/e.minTimeInBusiness;o>=2?(s+=20,r.push("Well-established business history")):o>=1?(s+=15,r.push("Meets time in business requirement")):(i.push("Business too new for this lender"),n.push("Consider new business financing options")),e.industryRestrictions.includes(t.industry)?i.push("Industry restrictions may apply"):(s+=10,r.push("Industry approved by lender"));let c=t.fundingNeeds.amount;c>=e.minAmount&&c<=e.maxAmount?(s+=15,r.push("Loan amount within lender range")):c<e.minAmount?(s+=5,i.push("Requested amount below minimum"),n.push("Consider increasing loan amount or finding alternative lenders")):(i.push("Requested amount exceeds maximum"),n.push("Consider multiple funding sources")),s>=80?(a.push("Apply immediately - excellent match"),a.push("Prepare financial documents"),a.push("Review loan terms carefully")):s>=60?(a.push("Review application requirements"),a.push("Address any concerns first"),a.push("Prepare strong application package")):(a.push("Improve fundability score"),a.push("Consider alternative lenders"),a.push("Work on business metrics"));let d="low";return i.length>=3?d="high":i.length>=1&&(d="medium"),{score:Math.min(s,100),strengths:r,concerns:i,recommendations:n,nextSteps:a,riskLevel:d}}static calculateAdvancedTradelineMatch(e,t){let s=0,r=[],i=[],n=[],a=[];"high"===e.creditBuildingImpact?(s+=30,r.push("High credit building potential")):"medium"===e.creditBuildingImpact?(s+=20,r.push("Moderate credit building impact")):s+=10;let l=e.creditReportingBureaus.length;l>=3?(s+=25,r.push("Reports to all major credit bureaus")):l>=2?(s+=20,r.push("Reports to multiple bureaus")):s+=15,t.fundabilityScore>=e.minCreditScore+50?(s+=20,r.push("Excellent qualification profile")):t.fundabilityScore>=e.minCreditScore?(s+=15,r.push("Meets qualification requirements")):(s+=5,i.push("May need to improve credit first")),12*t.timeInBusiness>=2*e.timeInBusinessMin?(s+=15,r.push("Well-established for this tradeline")):12*t.timeInBusiness>=e.timeInBusinessMin?(s+=10,r.push("Meets time requirements")):i.push("Business may be too new"),0===e.fees.setupFee?(s+=10,r.push("No setup fees required")):100>(e.fees.setupFee||0)?(s+=7,r.push("Low setup costs")):(s+=3,i.push("Higher setup fees required")),"high"===e.creditBuildingImpact&&n.push("Prioritize this tradeline for maximum impact"),t.fundabilityScore<60?(n.push("Start with easier approval tradelines"),a.push("Apply for starter business accounts")):a.push("Apply for multiple accounts for faster building"),a.push("Ensure timely payments for maximum benefit"),a.push("Monitor credit reports monthly");let o="low";return i.length>=2?o="high":i.length>=1&&(o="medium"),{score:Math.min(s,100),strengths:r,concerns:i,recommendations:n,nextSteps:a,riskLevel:o}}static async saveFundingMatches(e,t){try{let s=t.map(t=>({user_id:e,funding_opportunity_id:t.id,match_score:t.eligibilityScore,is_prequalified:t.eligibilityScore>=70,created_at:new Date().toISOString()}));await a.O.from("user_funding_matches").upsert(s,{onConflict:"user_id,funding_opportunity_id"})}catch(e){console.error("Error saving funding matches:",e)}}static async trackOpportunityView(e,t,s){try{await a.O.from("marketplace_analytics").insert({user_id:e,opportunity_id:t,opportunity_type:s,action:"view"})}catch(e){console.error("Error tracking view:",e)}}static async trackOpportunityApplication(e,t,s){try{await a.O.from("marketplace_analytics").insert({user_id:e,opportunity_id:t,opportunity_type:s,action:"apply"}),"funding"===s&&await a.O.from("funding_applications").insert({user_id:e,opportunity_id:t,status:"applied",applied_at:new Date().toISOString()})}catch(e){console.error("Error tracking application:",e)}}}function c({opportunity:e,userId:t,onApply:s,onSave:n}){var a;let[l,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(!1),u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),p=e=>`${e.toFixed(1)}%`,h=async()=>{m(!0);try{await o.trackOpportunityApplication(t,e.id,"funding"),s&&s(e),window.open(e.applicationUrl,"_blank")}catch(e){console.error("Error applying:",e)}finally{m(!1)}},x=async()=>{try{n&&n(e)}catch(e){console.error("Error saving:",e)}},g=async()=>{await o.trackOpportunityView(t,e.id,"funding"),c(!l)},y=(a=e.matchAnalysis.score)>=90?{grade:"A+",color:"text-green-600",bg:"bg-green-50"}:a>=80?{grade:"A",color:"text-green-600",bg:"bg-green-50"}:a>=70?{grade:"B+",color:"text-blue-600",bg:"bg-blue-50"}:a>=60?{grade:"B",color:"text-blue-600",bg:"bg-blue-50"}:a>=50?{grade:"C",color:"text-yellow-600",bg:"bg-yellow-50"}:{grade:"D",color:"text-red-600",bg:"bg-red-50"};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.lenderName}),e.promoted&&r.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Featured"})]}),r.jsx("p",{className:"text-gray-600 capitalize",children:e.productType.replace("_"," ")})]}),(0,r.jsxs)("div",{className:`${y.bg} ${y.color} px-3 py-2 rounded-lg text-center`,children:[r.jsx("div",{className:"text-lg font-bold",children:y.grade}),r.jsx("div",{className:"text-xs",children:"Match"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),(0,r.jsxs)("p",{className:"font-semibold",children:[u(e.minAmount)," - ",u(e.maxAmount)]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Rate"}),(0,r.jsxs)("p",{className:"font-semibold",children:[p(e.interestRateMin)," - ",p(e.interestRateMax)]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),(0,r.jsxs)("p",{className:"font-semibold",children:[e.termMonthsMin," - ",e.termMonthsMax," months"]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Approval Time"}),r.jsx("p",{className:"font-semibold",children:e.avgApprovalTime})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Risk Level:"}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"low":return"text-green-600 bg-green-50";case"medium":return"text-yellow-600 bg-yellow-50";case"high":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(e.matchAnalysis.riskLevel)}`,children:e.matchAnalysis.riskLevel.toUpperCase()})]}),r.jsx("div",{className:"mb-4",children:e.matchAnalysis.strengths.slice(0,2).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center text-green-700 text-sm mb-1",children:[r.jsx("span",{className:"mr-2",children:"✓"}),e]},t))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:h,disabled:d,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:d?"Applying...":"Apply Now"}),r.jsx("button",{onClick:x,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Save"}),r.jsx("button",{onClick:g,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:l?"Less":"Details"})]})]}),l&&(0,r.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Eligibility Analysis"}),e.matchAnalysis.strengths.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Strengths"}),r.jsx("ul",{className:"space-y-1",children:e.matchAnalysis.strengths.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-green-600 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5",children:"✓"}),e]},t))})]}),e.matchAnalysis.concerns.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-red-700 mb-2",children:"Potential Concerns"}),r.jsx("ul",{className:"space-y-1",children:e.matchAnalysis.concerns.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-red-600 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5",children:"⚠"}),e]},t))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements & Features"}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Minimum Credit Score: ",r.jsx("span",{className:"font-medium",children:e.minCreditScore})]})}),r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Time in Business: ",(0,r.jsxs)("span",{className:"font-medium",children:[e.minTimeInBusiness," months"]})]})}),r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Minimum Revenue: ",r.jsx("span",{className:"font-medium",children:u(e.minAnnualRevenue)})]})}),r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Personal Guarantee: ",r.jsx("span",{className:"font-medium",children:e.requiresPersonalGuarantee?"Required":"Not Required"})]})}),r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Collateral: ",r.jsx("span",{className:"font-medium",children:e.requiresCollateral?"Required":"Not Required"})]})})]}),e.features.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Features"}),r.jsx("ul",{className:"space-y-1",children:e.features.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"•"}),e]},t))})]})]})]}),e.matchAnalysis.recommendations.length>0&&(0,r.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-300",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Recommendations"}),r.jsx("ul",{className:"space-y-2",children:e.matchAnalysis.recommendations.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-blue-600 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5",children:"\uD83D\uDCA1"}),e]},t))})]}),e.matchAnalysis.nextSteps.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Next Steps"}),r.jsx("ol",{className:"space-y-2",children:e.matchAnalysis.nextSteps.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5 bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium",children:t+1}),e]},t))})]})]})]})}function d({opportunity:e,userId:t,onApply:s,onSave:n}){var a;let[l,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(!1),u=e=>{switch(e){case"experian":return"bg-blue-100 text-blue-800";case"equifax":return"bg-green-100 text-green-800";case"dun_bradstreet":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},p=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),h=async()=>{m(!0);try{await o.trackOpportunityApplication(t,e.id,"tradeline"),s&&s(e),window.open(e.applicationUrl,"_blank")}catch(e){console.error("Error applying:",e)}finally{m(!1)}},x=async()=>{try{n&&n(e)}catch(e){console.error("Error saving:",e)}},g=async()=>{await o.trackOpportunityView(t,e.id,"tradeline"),c(!l)},y=(a=e.matchAnalysis.score)>=90?{grade:"A+",color:"text-green-600",bg:"bg-green-50"}:a>=80?{grade:"A",color:"text-green-600",bg:"bg-green-50"}:a>=70?{grade:"B+",color:"text-blue-600",bg:"bg-blue-50"}:a>=60?{grade:"B",color:"text-blue-600",bg:"bg-blue-50"}:a>=50?{grade:"C",color:"text-yellow-600",bg:"bg-yellow-50"}:{grade:"D",color:"text-red-600",bg:"bg-red-50"};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.vendorName}),e.promoted&&r.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Featured"})]}),r.jsx("p",{className:"text-gray-600",children:e.serviceType})]}),(0,r.jsxs)("div",{className:`${y.bg} ${y.color} px-3 py-2 rounded-lg text-center`,children:[r.jsx("div",{className:"text-lg font-bold",children:y.grade}),r.jsx("div",{className:"text-xs",children:"Match"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Credit Building Impact"}),(0,r.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"high":return"text-green-600 bg-green-50";case"medium":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}})(e.creditBuildingImpact)}`,children:[e.creditBuildingImpact.toUpperCase()," IMPACT"]}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.estimatedCreditImpact})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Reports To"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.creditReportingBureaus.map((e,t)=>r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u(e)}`,children:e.replace("_"," ").toUpperCase()},t))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Credit Limit"}),(0,r.jsxs)("p",{className:"font-semibold",children:[p(e.creditLimit.min)," - ",p(e.creditLimit.max)]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Payment Terms"}),r.jsx("p",{className:"font-semibold",children:e.paymentTerms})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Setup Fee"}),r.jsx("p",{className:"font-semibold",children:e.fees.setupFee?p(e.fees.setupFee):"Free"})]})]}),r.jsx("div",{className:"mb-4",children:e.matchAnalysis.strengths.slice(0,2).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center text-green-700 text-sm mb-1",children:[r.jsx("span",{className:"mr-2",children:"✓"}),e]},t))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:h,disabled:d,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:d?"Applying...":"Apply Now"}),r.jsx("button",{onClick:x,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Save"}),r.jsx("button",{onClick:g,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:l?"Less":"Details"})]})]}),l&&(0,r.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Credit Building Strategy"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:["Min Credit Score: ",r.jsx("span",{className:"font-medium",children:e.minCreditScore||"None"})]}),(0,r.jsxs)("p",{children:["Time in Business: ",(0,r.jsxs)("span",{className:"font-medium",children:[e.timeInBusinessMin," months"]})]}),(0,r.jsxs)("p",{children:["Min Revenue: ",r.jsx("span",{className:"font-medium",children:p(e.annualRevenueMin)})]})]})]}),e.benefits.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Benefits"}),r.jsx("ul",{className:"space-y-1",children:e.benefits.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx("span",{className:"mr-2 text-green-500",children:"•"}),e]},t))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Match Analysis"}),e.matchAnalysis.strengths.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Why This Works"}),r.jsx("ul",{className:"space-y-1",children:e.matchAnalysis.strengths.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-green-600 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5",children:"✓"}),e]},t))})]}),e.matchAnalysis.concerns.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-yellow-700 mb-2",children:"Considerations"}),r.jsx("ul",{className:"space-y-1",children:e.matchAnalysis.concerns.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-yellow-600 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5",children:"⚠"}),e]},t))})]})]})]}),e.matchAnalysis.recommendations.length>0&&(0,r.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-300",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Expert Recommendations"}),r.jsx("ul",{className:"space-y-2",children:e.matchAnalysis.recommendations.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-blue-600 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5",children:"\uD83D\uDCA1"}),e]},t))})]}),e.matchAnalysis.nextSteps.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Action Plan"}),r.jsx("ol",{className:"space-y-2",children:e.matchAnalysis.nextSteps.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[r.jsx("span",{className:"mr-2 mt-0.5 bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium",children:t+1}),e]},t))})]})]})]})}function m(){let{data:e}=(0,n.useSession)(),[t,s]=(0,i.useState)("funding"),[a,l]=(0,i.useState)([]),[o,m]=(0,i.useState)([]),[u,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(""),[g,y]=(0,i.useState)(!1),[b,f]=(0,i.useState)({minAmount:0,maxAmount:1e6,productTypes:[],creditScoreRange:[500,850],riskLevel:[]}),v=async()=>{p(!0);try{let s=await fetch(`/api/marketplace/opportunities?type=${t}&userId=${e?.user?.id}`),r=await s.json();r.success&&("funding"===t?l(r.opportunities):m(r.opportunities))}catch(e){console.error("Error loading opportunities:",e)}finally{p(!1)}},N=async t=>{try{await fetch("/api/marketplace/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.user?.id,opportunityId:t.id,type:"funding"})})}catch(e){console.error("Error tracking application:",e)}},j=async t=>{try{await fetch("/api/marketplace/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.user?.id,opportunityId:t.id,type:"tradeline"})})}catch(e){console.error("Error tracking application:",e)}},S=async s=>{try{await fetch("/api/marketplace/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.user?.id,opportunityId:s.id,type:t})})}catch(e){console.error("Error saving opportunity:",e)}},w=a.filter(e=>(!h||!!e.lenderName.toLowerCase().includes(h.toLowerCase()))&&(!(b.minAmount>0)||!(e.maxAmount<b.minAmount))&&(!(b.maxAmount<1e6)||!(e.minAmount>b.maxAmount))&&(!(b.productTypes.length>0)||!!b.productTypes.includes(e.productType))&&(!(b.riskLevel.length>0)||!!b.riskLevel.includes(e.matchAnalysis.riskLevel))),A=o.filter(e=>!h||!!e.vendorName.toLowerCase().includes(h.toLowerCase()));return e?r.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Funding Marketplace"}),r.jsx("p",{className:"text-gray-600",children:"Discover personalized funding and credit building opportunities"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>s("funding"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"funding"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"\uD83D\uDCB0 Funding Opportunities"}),r.jsx("button",{onClick:()=>s("tradelines"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"tradelines"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"\uD83D\uDCC8 Credit Building"})]})}),(0,r.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:`Search ${"funding"===t?"lenders":"vendors"}...`,value:h,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,r.jsxs)("button",{onClick:()=>y(!g),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:["\uD83D\uDD0D Filters",g&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"ON"})]}),r.jsx("button",{onClick:v,disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Loading...":"Refresh"})]}),g&&"funding"===t&&(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Filter Options"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount Range"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"number",placeholder:"Min",value:b.minAmount,onChange:e=>f(t=>({...t,minAmount:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),r.jsx("input",{type:"number",placeholder:"Max",value:b.maxAmount,onChange:e=>f(t=>({...t,maxAmount:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Type"}),(0,r.jsxs)("select",{multiple:!0,value:b.productTypes,onChange:e=>{let t=Array.from(e.target.selectedOptions,e=>e.value);f(e=>({...e,productTypes:t}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"term_loan",children:"Term Loan"}),r.jsx("option",{value:"line_of_credit",children:"Line of Credit"}),r.jsx("option",{value:"sba_loan",children:"SBA Loan"}),r.jsx("option",{value:"equipment_financing",children:"Equipment Financing"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),r.jsx("div",{className:"space-y-2",children:["low","medium","high"].map(e=>(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:b.riskLevel.includes(e),onChange:t=>{t.target.checked?f(t=>({...t,riskLevel:[...t.riskLevel,e]})):f(t=>({...t,riskLevel:t.riskLevel.filter(t=>t!==e)}))},className:"mr-2"}),e.charAt(0).toUpperCase()+e.slice(1)," Risk"]},e))})]})]})]}),u?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsx("div",{className:"space-y-6",children:"funding"===t?w.length>0?w.map(t=>r.jsx(c,{opportunity:t,userId:e.user?.id||"",onApply:N,onSave:S},t.id)):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCBC"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No funding opportunities found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]}):A.length>0?A.map(t=>r.jsx(d,{opportunity:t,userId:e.user?.id||"",onApply:j,onSave:S},t.id)):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCC8"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tradeline opportunities found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or take an assessment first"})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Sign In Required"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Please sign in to access the marketplace"}),r.jsx("button",{onClick:()=>window.location.href="/auth/signin",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Sign In"})]})})}},27345:(e,t,s)=>{"use strict";s.d(t,{AssessmentProvider:()=>o,Y:()=>c});var r=s(10326),i=s(17577);let n={currentStep:0,totalSteps:0,responses:{},currentScore:0,categoryScores:{},isComplete:!1,questions:[],loading:!1,error:null};function a(e,t){switch(t.type){case"INITIALIZE":return{...e,questions:t.questions,totalSteps:t.questions.length,currentStep:0,responses:{},currentScore:0,categoryScores:{},isComplete:!1};case"SET_RESPONSE":return{...e,responses:{...e.responses,[t.questionId]:t.value}};case"NEXT_STEP":return{...e,currentStep:Math.min(e.currentStep+1,e.totalSteps-1)};case"PREV_STEP":return{...e,currentStep:Math.max(e.currentStep-1,0)};case"SET_STEP":return{...e,currentStep:Math.max(0,Math.min(t.step,e.totalSteps-1))};case"UPDATE_SCORE":return{...e,currentScore:t.score,categoryScores:t.categoryScores};case"COMPLETE_ASSESSMENT":return{...e,isComplete:!0};case"RESET_ASSESSMENT":return{...n,questions:e.questions,totalSteps:e.questions.length};case"SET_LOADING":return{...e,loading:t.loading};case"SET_ERROR":return{...e,error:t.error};default:return e}}let l=(0,i.createContext)(void 0);function o({children:e}){let[t,s]=(0,i.useReducer)(a,n),o=()=>{let e=Object.entries(t.responses).map(([e,s])=>{let r=t.questions.find(t=>t.id===e);return r?{category:r.category,criterionId:r.id,criterionName:r.question,responseValue:s,responseType:r.type,pointsEarned:function(e,t){switch(e.type){case"boolean":return!0===t?100:0;case"select":return({Excellent:100,"Very Good":85,Good:70,Fair:55,Poor:25,Yes:100,No:0,Corporation:100,LLC:85,Partnership:60,"Sole Proprietorship":40})[t]||0;case"number":if(e.id.includes("revenue")){let e=parseFloat(t)||0;if(e>=1e6)return 100;if(e>=5e5)return 85;if(e>=25e4)return 70;if(e>=1e5)return 55;if(e>=5e4)return 40;return 25}if(e.id.includes("years")||e.id.includes("time")){let e=parseFloat(t)||0;if(e>=5)return 100;if(e>=3)return 80;if(e>=2)return 60;if(e>=1)return 40;return 20}return t>0?75:0;case"text":return t&&t.trim()?80:0;default:return 0}}(r,s),pointsPossible:100,weightFactor:r.weight,isCritical:r.isCritical}:null}).filter(Boolean),r=e.reduce((e,t)=>e+t.pointsEarned,0),i=100*e.length,n={};Object.entries(e.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{})).forEach(([e,t])=>{let s=t.reduce((e,t)=>e+t.pointsEarned,0),r=100*t.length;n[e]=r>0?s/r*100:0}),s({type:"UPDATE_SCORE",score:Math.round(i>0?r/i*100:0),categoryScores:n})},c=async()=>{try{s({type:"SET_LOADING",loading:!0}),s({type:"COMPLETE_ASSESSMENT"}),s({type:"SET_LOADING",loading:!1})}catch(e){s({type:"SET_ERROR",error:e instanceof Error?e.message:"Unknown error"}),s({type:"SET_LOADING",loading:!1})}},d=async()=>{try{console.log("\uD83D\uDCBE Saving assessment and updating dashboard..."),s({type:"SET_LOADING",loading:!0});let e={responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores,completedAt:new Date().toISOString(),questions:t.questions};localStorage.setItem("lastAssessmentResults",JSON.stringify(e)),console.log("✅ Saved to localStorage");try{let e=await fetch("/api/fundability/save-assessment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores})});if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);let s=await e.json();if(s.success)s.fallback?console.log("⚠️ Fallback save:",s.message):(console.log("✅ Database save successful:",s.message),s.data?.userId&&localStorage.setItem("demoUserId",s.data.userId));else throw Error(s.error||"Save failed")}catch(e){console.warn("⚠️ API call failed, but localStorage saved:",e)}return window.dispatchEvent(new CustomEvent("dashboardRefresh")),window.dispatchEvent(new StorageEvent("storage",{key:"lastAssessmentResults",newValue:JSON.stringify(e)})),s({type:"SET_LOADING",loading:!1}),!0}catch(e){return console.error("❌ Critical error in save process:",e),s({type:"SET_LOADING",loading:!1}),!1}};return r.jsx(l.Provider,{value:{state:t,dispatch:s,setResponse:(e,t)=>{s({type:"SET_RESPONSE",questionId:e,value:t}),setTimeout(()=>o(),100)},nextStep:()=>{s({type:"NEXT_STEP"})},prevStep:()=>{s({type:"PREV_STEP"})},goToStep:e=>{s({type:"SET_STEP",step:e})},calculateScore:o,completeAssessment:c,resetAssessment:()=>{s({type:"RESET_ASSESSMENT"})},saveAndUpdateDashboard:d,getReportData:()=>({responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores,questions:t.questions,completedQuestions:Object.keys(t.responses).length})},children:e})}function c(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAssessment must be used within an AssessmentProvider");return e}},2777:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});let r=(0,s(52997).eI)("https://fzvtzzzsoccptvgihxfl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ6dnR6enpzb2NjcHR2Z2loeGZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNTAwNjksImV4cCI6MjA2NjcyNjA2OX0.UFY3vSerY963T2cqbgrhstgZfhkgfN5KN7lZUVZ8DLA")},15495:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>o});var r=s(19510),i=s(25384),n=s.n(i);s(5023);let a=(0,s(68570).createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\app\providers.tsx#default`);var l=s(14886);let o={title:"YBW Funds Platform",description:"Business Credit & Funding Platform"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx(a,{children:(0,r.jsxs)(l.g,{children:["  ",e]})})})})}},21642:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(19510);let i=(0,s(68570).createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\components\marketplace\MarketplaceDashboard.tsx#MarketplaceDashboard`);function n(){return r.jsx(i,{})}},14886:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var r=s(68570);let i=(0,r.createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\contexts\AssessmentContext.tsx#AssessmentProvider`);(0,r.createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\contexts\AssessmentContext.tsx#useAssessment`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,819,997],()=>s(8369));module.exports=r})();