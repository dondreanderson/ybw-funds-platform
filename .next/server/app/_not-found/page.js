(()=>{var e={};e.id=409,e.ids=[409],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},41906:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>f,tree:()=>l}),r(7352),r(35866),r(15495);var s=r(23191),n=r(88716),o=r(37922),a=r.n(o),i=r(95231),u={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>i[e]);r.d(t,u);let l=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"C:\\Users\\dondr\\ybw-funds-platform\\ybw-funds-platform\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=[],d="/_not-found/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},73143:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},14464:(e,t,r)=>{Promise.resolve().then(r.bind(r,42126)),Promise.resolve().then(r.bind(r,27345))},42126:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(10326),n=r(77109),o=r(27345);function a({children:e}){return s.jsx(n.SessionProvider,{children:s.jsx(o.AssessmentProvider,{children:e})})}},27345:(e,t,r)=>{"use strict";r.d(t,{AssessmentProvider:()=>u,Y:()=>l});var s=r(10326),n=r(17577);let o={currentStep:0,totalSteps:0,responses:{},currentScore:0,categoryScores:{},isComplete:!1,questions:[],loading:!1,error:null};function a(e,t){switch(t.type){case"INITIALIZE":return{...e,questions:t.questions,totalSteps:t.questions.length,currentStep:0,responses:{},currentScore:0,categoryScores:{},isComplete:!1};case"SET_RESPONSE":return{...e,responses:{...e.responses,[t.questionId]:t.value}};case"NEXT_STEP":return{...e,currentStep:Math.min(e.currentStep+1,e.totalSteps-1)};case"PREV_STEP":return{...e,currentStep:Math.max(e.currentStep-1,0)};case"SET_STEP":return{...e,currentStep:Math.max(0,Math.min(t.step,e.totalSteps-1))};case"UPDATE_SCORE":return{...e,currentScore:t.score,categoryScores:t.categoryScores};case"COMPLETE_ASSESSMENT":return{...e,isComplete:!0};case"RESET_ASSESSMENT":return{...o,questions:e.questions,totalSteps:e.questions.length};case"SET_LOADING":return{...e,loading:t.loading};case"SET_ERROR":return{...e,error:t.error};default:return e}}let i=(0,n.createContext)(void 0);function u({children:e}){let[t,r]=(0,n.useReducer)(a,o),u=()=>{let e=Object.entries(t.responses).map(([e,r])=>{let s=t.questions.find(t=>t.id===e);return s?{category:s.category,criterionId:s.id,criterionName:s.question,responseValue:r,responseType:s.type,pointsEarned:function(e,t){switch(e.type){case"boolean":return!0===t?100:0;case"select":return({Excellent:100,"Very Good":85,Good:70,Fair:55,Poor:25,Yes:100,No:0,Corporation:100,LLC:85,Partnership:60,"Sole Proprietorship":40})[t]||0;case"number":if(e.id.includes("revenue")){let e=parseFloat(t)||0;if(e>=1e6)return 100;if(e>=5e5)return 85;if(e>=25e4)return 70;if(e>=1e5)return 55;if(e>=5e4)return 40;return 25}if(e.id.includes("years")||e.id.includes("time")){let e=parseFloat(t)||0;if(e>=5)return 100;if(e>=3)return 80;if(e>=2)return 60;if(e>=1)return 40;return 20}return t>0?75:0;case"text":return t&&t.trim()?80:0;default:return 0}}(s,r),pointsPossible:100,weightFactor:s.weight,isCritical:s.isCritical}:null}).filter(Boolean),s=e.reduce((e,t)=>e+t.pointsEarned,0),n=100*e.length,o={};Object.entries(e.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{})).forEach(([e,t])=>{let r=t.reduce((e,t)=>e+t.pointsEarned,0),s=100*t.length;o[e]=s>0?r/s*100:0}),r({type:"UPDATE_SCORE",score:Math.round(n>0?s/n*100:0),categoryScores:o})},l=async()=>{try{r({type:"SET_LOADING",loading:!0}),r({type:"COMPLETE_ASSESSMENT"}),r({type:"SET_LOADING",loading:!1})}catch(e){r({type:"SET_ERROR",error:e instanceof Error?e.message:"Unknown error"}),r({type:"SET_LOADING",loading:!1})}},c=async()=>{try{console.log("\uD83D\uDCBE Saving assessment and updating dashboard..."),r({type:"SET_LOADING",loading:!0});let e={responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores,completedAt:new Date().toISOString(),questions:t.questions};localStorage.setItem("lastAssessmentResults",JSON.stringify(e)),console.log("✅ Saved to localStorage");try{let e=await fetch("/api/fundability/save-assessment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores})});if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);let r=await e.json();if(r.success)r.fallback?console.log("⚠️ Fallback save:",r.message):(console.log("✅ Database save successful:",r.message),r.data?.userId&&localStorage.setItem("demoUserId",r.data.userId));else throw Error(r.error||"Save failed")}catch(e){console.warn("⚠️ API call failed, but localStorage saved:",e)}return window.dispatchEvent(new CustomEvent("dashboardRefresh")),window.dispatchEvent(new StorageEvent("storage",{key:"lastAssessmentResults",newValue:JSON.stringify(e)})),r({type:"SET_LOADING",loading:!1}),!0}catch(e){return console.error("❌ Critical error in save process:",e),r({type:"SET_LOADING",loading:!1}),!1}};return s.jsx(i.Provider,{value:{state:t,dispatch:r,setResponse:(e,t)=>{r({type:"SET_RESPONSE",questionId:e,value:t}),setTimeout(()=>u(),100)},nextStep:()=>{r({type:"NEXT_STEP"})},prevStep:()=>{r({type:"PREV_STEP"})},goToStep:e=>{r({type:"SET_STEP",step:e})},calculateScore:u,completeAssessment:l,resetAssessment:()=>{r({type:"RESET_ASSESSMENT"})},saveAndUpdateDashboard:c,getReportData:()=>({responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores,questions:t.questions,completedQuestions:Object.keys(t.responses).length})},children:e})}function l(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAssessment must be used within an AssessmentProvider");return e}},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return n},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return n},default:function(){return o}});let s=r(16399),n="next/dist/client/components/parallel-route-default.js";function o(){(0,s.notFound)()}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},15495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>u});var s=r(19510),n=r(25384),o=r.n(n);r(5023);let a=(0,r(68570).createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\app\providers.tsx#default`);var i=r(14886);let u={title:"YBW Funds Platform",description:"Business Credit & Funding Platform"};function l({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:o().className,children:s.jsx(a,{children:(0,s.jsxs)(i.g,{children:["  ",e]})})})})}},14886:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var s=r(68570);let n=(0,s.createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\contexts\AssessmentContext.tsx#AssessmentProvider`);(0,s.createProxy)(String.raw`C:\Users\dondr\ybw-funds-platform\ybw-funds-platform\src\contexts\AssessmentContext.tsx#useAssessment`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,819],()=>r(41906));module.exports=s})();