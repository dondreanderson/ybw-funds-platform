(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{17328:function(e,s,t){Promise.resolve().then(t.bind(t,67610))},67610:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ee},dynamic:function(){return Q}});var a=t(57437),i=t(2265);let n=(0,t(96580).eI)("https://fzvtzzzsoccptvgihxfl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ6dnR6enpzb2NjcHR2Z2loeGZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNTAwNjksImV4cCI6MjA2NjcyNjA2OX0.UFY3vSerY963T2cqbgrhstgZfhkgfN5KN7lZUVZ8DLA");function r(){let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await n.auth.getSession();if(null==e?void 0:e.user){let{data:t,error:a}=await n.from("users").select("*").eq("email",e.user.email).single();t&&!a?s(t):(console.log("No user profile found:",a),s({id:e.user.id,email:e.user.email||"",name:e.user.email,fundability_score:0}))}else s(null)}catch(e){console.error("Error getting session:",e),s(null)}finally{a(!1)}})();let{data:{subscription:e}}=n.auth.onAuthStateChange(async(e,t)=>{try{if(null==t?void 0:t.user){let{data:e,error:a}=await n.from("users").select("*").eq("email",t.user.email).single();e&&!a?s(e):s({id:t.user.id,email:t.user.email||"",name:t.user.email,fundability_score:0})}else s(null)}catch(e){console.error("Error in auth state change:",e),s(null)}finally{a(!1)}});return()=>e.unsubscribe()},[]),{user:e,loading:t,signOut:async()=>{await n.auth.signOut(),s(null)},signIn:async(e,s)=>{let{data:t,error:a}=await n.auth.signInWithPassword({email:e,password:s});return{data:t,error:a}}}}var l=t(13287);class c{async getLatestAssessment(e){try{console.log("Fetching assessment for user:",e);let s=new Promise((e,s)=>setTimeout(()=>s(Error("Query timeout")),1e4)),t=n.from("advanced_fundability_assessments").select("\n          *,\n          category_performances (*)\n        ").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single(),{data:a,error:i}=await Promise.race([t,s]);if(i||!a)return console.log("No assessment found or error:",null==i?void 0:i.message),this.getFallbackAssessment(e);return console.log("Assessment found:",a),a}catch(s){return console.error("Error fetching assessment:",s),this.getFallbackAssessment(e)}}async getAssessmentHistory(e){try{console.log("Fetching history for user:",e);let s=await this.getLatestAssessment(e);return s?[s]:[]}catch(e){return console.error("Error fetching history:",e),[]}}async getScoreHistory(e){try{return console.log("Fetching score history for user:",e),this.generateMockHistory(e)}catch(s){return console.error("Error fetching score history:",s),this.generateMockHistory(e)}}getFallbackAssessment(e){let s={"admin@ybwfunds.com":95,"enterprise@ybwfunds.com":90,"business@ybwfunds.com":85,"demo@ybwfunds.com":75,"startup@ybwfunds.com":65,"lowscore@ybwfunds.com":25}[e]||82;return{id:"fallback-".concat(e),user_id:e,overall_score:s,category_scores:this.generateCategoryScores(s),created_at:new Date().toISOString(),completion_percentage:100,assessment_version:"2.0",status:"completed",category_performances:[{id:"1",category_name:"Business Registration",score:Math.max(30,s-10+20*Math.random()),max_score:100,completed_criteria:18,total_criteria:20},{id:"2",category_name:"Credit Profile",score:Math.max(30,s-5+15*Math.random()),max_score:100,completed_criteria:19,total_criteria:20},{id:"3",category_name:"Financial Documentation",score:Math.max(30,s+10*Math.random()),max_score:100,completed_criteria:17,total_criteria:20},{id:"4",category_name:"Operational Infrastructure",score:Math.max(30,s-15+25*Math.random()),max_score:100,completed_criteria:16,total_criteria:20},{id:"5",category_name:"Online Presence",score:Math.max(30,s-20+30*Math.random()),max_score:100,completed_criteria:15,total_criteria:20},{id:"6",category_name:"Risk & Compliance",score:Math.max(30,s-8+18*Math.random()),max_score:100,completed_criteria:19,total_criteria:20}]}}generateCategoryScores(e){let s={};return["business_registration","credit_profile","financial_documentation","operational_infrastructure","online_presence","risk_compliance"].forEach(t=>{s[t]=Math.max(0,Math.min(100,Math.round(e+(Math.random()-.5)*30)))}),s}generateMockHistory(e){let s=Math.max(20,({"admin@ybwfunds.com":95,"enterprise@ybwfunds.com":90,"business@ybwfunds.com":85,"demo@ybwfunds.com":75,"startup@ybwfunds.com":65,"lowscore@ybwfunds.com":25}[e]||82)-20);return["2024-01-01","2024-02-01","2024-03-01","2024-04-01","2024-05-01","2024-06-01"].map((e,t)=>({id:"history_".concat(t),overall_score:Math.round(s+4*t),assessment_date:e,category_scores:{}}))}transformToChartData(e){if(console.log("Transforming chart data:",e),!e||!e.category_performances)return{categoryData:[],overallScore:0,metrics:[]};let s=e.category_performances.map(e=>({category:e.category_name,score:Math.round(e.score),fullMark:e.max_score,benchmark:this.getIndustryBenchmark(e.category_name)})),t=e.category_performances.map(e=>({title:e.category_name,value:Math.round(e.score),change:Math.floor(20*Math.random())-10,color:this.getCategoryColor(e.category_name)}));return{categoryData:s,overallScore:e.overall_score,metrics:t}}transformToTrendData(e){return e.map((e,s)=>({date:new Date(e.assessment_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),score:e.overall_score}))}transformToComparisonData(e){return e&&e.category_performances?e.category_performances.map(e=>({category:e.category_name,score:Math.round(e.score),benchmark:this.getIndustryBenchmark(e.category_name),fullMark:e.max_score})):[]}getIndustryBenchmark(e){return({"Business Registration":75,"Credit Profile":80,"Financial Documentation":85,"Operational Infrastructure":78,"Online Presence":72,"Risk & Compliance":80})[e]||75}getCategoryColor(e){return({"Business Registration":"#10b981","Credit Profile":"#3b82f6","Financial Documentation":"#8b5cf6","Operational Infrastructure":"#f59e0b","Online Presence":"#ef4444","Risk & Compliance":"#06b6d4"})[e]||"#6b7280"}}let o=new c;var d=t(47625),m=t(76535),x=t(39366),u=t(93019),h=t(8646),g=t(90597);function b(e){let{data:s,className:t=""}=e;return(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full h-80 ".concat(t),children:(0,a.jsx)(d.h,{width:"100%",height:"100%",children:(0,a.jsxs)(m.H,{data:s,children:[(0,a.jsx)(x.n,{gridType:"polygon"}),(0,a.jsx)(u.I,{dataKey:"category",tick:{fontSize:12,fill:"#6b7280"}}),(0,a.jsx)(h.S,{angle:90,domain:[0,100],tick:{fontSize:10,fill:"#9ca3af"}}),(0,a.jsx)(g.F,{name:"Score",dataKey:"score",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3,strokeWidth:2})]})})})}var p=t(5481),y=t(56940),f=t(97059),j=t(62994),v=t(8147),N=t(23263);function w(e){let{data:s,className:t=""}=e;return(0,a.jsx)(l.E.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full h-80 ".concat(t),children:(0,a.jsx)(d.h,{width:"100%",height:"100%",children:(0,a.jsxs)(p.T,{data:s,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"scoreGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),(0,a.jsx)(y.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(f.K,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},axisLine:!1}),(0,a.jsx)(j.B,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},axisLine:!1}),(0,a.jsx)(v.u,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px",color:"#ffffff"}}),(0,a.jsx)(N.u,{type:"monotone",dataKey:"score",stroke:"#3b82f6",fillOpacity:1,fill:"url(#scoreGradient)",strokeWidth:3})]})})})}var k=t(77031),C=t(31699);function _(e){let{data:s,className:t=""}=e;return(0,a.jsx)(l.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full h-80 ".concat(t),children:(0,a.jsx)(d.h,{width:"100%",height:"100%",children:(0,a.jsxs)(k.v,{data:s,layout:"horizontal",children:[(0,a.jsx)(y.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(f.K,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"}}),(0,a.jsx)(j.B,{type:"category",dataKey:"category",tick:{fontSize:12,fill:"#6b7280"},width:120}),(0,a.jsx)(v.u,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px",color:"#ffffff"}}),(0,a.jsx)(C.$,{dataKey:"benchmark",fill:"#e5e7eb",name:"Industry Benchmark"}),(0,a.jsx)(C.$,{dataKey:"score",fill:"#3b82f6",name:"Your Score"})]})})})}var S=t(41718),A=t(3574),B=t(20407),E=t(22190);function I(e){let{data:s,className:t=""}=e,i=e=>[{name:e.name,value:e.value,fill:e.color},{name:"remaining",value:100-e.value,fill:"#e5e7eb"}];return(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full h-80 relative ".concat(t),children:[(0,a.jsx)(d.h,{width:"100%",height:"100%",children:(0,a.jsxs)(S.u,{children:[s.map((e,s)=>(0,a.jsx)(A.b,{data:i(e),cx:"50%",cy:"50%",startAngle:90,endAngle:-270,innerRadius:40+25*s,outerRadius:55+25*s,paddingAngle:0,dataKey:"value",children:i(e).map((e,t)=>(0,a.jsx)(B.b,{fill:e.fill},"cell-".concat(s,"-").concat(t)))},"ring-".concat(s))),(0,a.jsx)(E.D,{verticalAlign:"bottom",height:36,formatter:(e,t)=>{let a=s.find(s=>s.name===e);return a?"".concat(e,": ").concat(a.value,"%"):e}})]})}),(0,a.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"Progress"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Overview"})]})]})}function D(e){var s,t;let{assessment:n,history:c}=e,{user:d}=r(),[m,x]=(0,i.useState)("overview"),[u,h]=(0,i.useState)([]);if((0,i.useEffect)(()=>{d&&o.getScoreHistory(d.id).then(h)},[d]),!n)return(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Analytics Overview"}),(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No assessment data available for analytics"})]});let{categoryData:g}=o.transformToChartData(n),p=o.transformToTrendData(u),y=o.transformToComparisonData(n),f=(null===(s=n.category_performances)||void 0===s?void 0:s.slice(0,3).map(e=>({name:e.category_name,value:Math.round(e.score/e.max_score*100),color:o.getCategoryColor(e.category_name)||"#3b82f6"})))||[];return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 sm:mb-0",children:"Analytics Overview"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"trends",label:"Trends"},{id:"comparison",label:"Comparison"},{id:"progress",label:"Progress"}].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{console.log("Switching to tab: ".concat(e.id)),x(e.id)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(m===e.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.id))})]}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"w-full h-full",children:(()=>{switch(m){case"overview":return(0,a.jsx)(b,{data:g},"overview");case"trends":return(0,a.jsx)(w,{data:p},"trends");case"comparison":return(0,a.jsx)(_,{data:y},"comparison");case"progress":return(0,a.jsx)(I,{data:f},"progress");default:return(0,a.jsx)(b,{data:g},"default")}})()},m)}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Categories:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:(null===(t=n.category_performances)||void 0===t?void 0:t.length)||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Completion:"}),(0,a.jsxs)("span",{className:"ml-1 font-medium",children:[n.completion_percentage||100,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Time:"}),(0,a.jsxs)("span",{className:"ml-1 font-medium",children:[n.completion_time_minutes||"N/A"," min"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Status:"}),(0,a.jsx)("span",{className:"ml-1 font-medium capitalize",children:n.status||"completed"})]})]})})]})}var M=t(70525),F=t(95252),P=t(48736),O=t(88906),q=t(95805),z=t(60044);function Z(e){let{title:s,value:t,change:i,icon:n,color:r="#3b82f6",className:c=""}=e,o=i&&i>0?"#10b981":"#ef4444";return(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.02},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 ".concat(c),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"".concat(r,"15")},children:(0,a.jsx)(n,{size:24,style:{color:r}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:s}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t})]})]}),void 0!==i&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",style:{color:o},children:[i>0?"+":"",i,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"vs last month"})]})]})})}function R(e){let{score:s,maxScore:t=100,size:i=200,className:n=""}=e,r=s/t*100,c=s>=80?"#10b981":s>=60?"#f59e0b":s>=40?"#ef4444":"#6b7280";return(0,a.jsxs)("div",{className:"relative flex items-center justify-center ".concat(n),children:[(0,a.jsx)("div",{style:{width:i,height:i},children:(0,a.jsx)(d.h,{width:"100%",height:"100%",children:(0,a.jsx)(S.u,{children:(0,a.jsxs)(A.b,{data:[{name:"Score",value:r},{name:"Remaining",value:100-r}],cx:"50%",cy:"50%",startAngle:90,endAngle:-270,innerRadius:60,outerRadius:80,paddingAngle:0,dataKey:"value",children:[(0,a.jsx)(B.b,{fill:c}),(0,a.jsx)(B.b,{fill:"#e5e7eb"})]})})})}),(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,a.jsxs)(l.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,duration:.5},className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",style:{color:c},children:s}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["out of ",t]})]})})]})}function T(e){let{assessment:s}=e;if(!s)return(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:(0,a.jsx)("div",{className:"lg:col-span-3 text-center py-8 text-gray-500",children:"No assessment data available"})});let{categoryData:t,overallScore:i,metrics:n}=o.transformToChartData(s),r={"Business Registration":M.Z,"Credit Profile":F.Z,"Financial Documentation":P.Z,"Operational Infrastructure":O.Z,"Online Presence":q.Z,"Risk & Compliance":z.Z,Credit:F.Z,Financial:P.Z,"Business Plan":M.Z,Collateral:O.Z,Management:q.Z,Industry:z.Z},c=e=>r[e]||M.Z;return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Overall Fundability Score"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(R,{score:i,size:180})}),(0,a.jsxs)("div",{className:"mt-4 text-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Assessment Version: ",s.assessment_version||"2.0"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Completion: ",s.completion_percentage||100,"%"]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:n.slice(0,6).map((e,s)=>(0,a.jsx)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*s,duration:.5},children:(0,a.jsx)(Z,{title:e.title,value:e.value,change:e.change,icon:c(e.title),color:e.color})},e.title))})]})}var L=t(31047),W=t(3085),H=t(21047);function Y(e){let{assessments:s}=e;if(!s||0===s.length)return(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assessment History"}),(0,a.jsx)(L.Z,{size:20,className:"text-gray-500"})]}),(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No assessment history available"})]});let t=e=>e>0?(0,a.jsx)(M.Z,{size:16,className:"text-green-500"}):e<0?(0,a.jsx)(W.Z,{size:16,className:"text-red-500"}):(0,a.jsx)(H.Z,{size:16,className:"text-gray-400"}),i=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-500",n=(e,s)=>s?e-s:0;return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assessment History"}),(0,a.jsx)(L.Z,{size:20,className:"text-gray-500"})]}),(0,a.jsx)("div",{className:"space-y-6",children:s.map((e,r)=>{let c=s[r+1],o=n(e.overall_score,(null==c?void 0:c.overall_score)||null);return(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*r,duration:.5},className:"border-l-4 border-blue-500 pl-4 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:e.overall_score}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[t(o),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(i(o)),children:[o>0?"+":"",o]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["v",e.assessment_version||"2.0"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.completion_percentage||100,"% complete"]})]})]}),e.category_performances&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:e.category_performances.map(e=>{let s=Math.floor(10*Math.random())-5;return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1 truncate",title:e.category_name,children:e.category_name}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.score}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[t(s),(0,a.jsxs)("span",{className:"text-xs ".concat(i(s)),children:[s>0?"+":"",s]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.completed_criteria,"/",e.total_criteria," criteria"]})]},e.id)})}),e.recommendations&&e.recommendations.length>0&&(0,a.jsxs)("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-blue-800 mb-1",children:"Key Recommendations:"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:[e.recommendations.slice(0,2).join(", "),e.recommendations.length>2&&"..."]})]})]},e.id)})}),s.length>=10&&(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{className:"px-4 py-2 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Load More History"})})]})}function K(){return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Loading your dashboard..."})]})})}var $=t(47692);function U(e){let{className:s=""}=e,{user:t,loading:n,signOut:c}=r(),[d,m]=(0,i.useState)(null),[x,u]=(0,i.useState)([]),[h,g]=(0,i.useState)(!0),[b,p]=(0,i.useState)(null);return((0,i.useEffect)(()=>{t&&!n&&(async()=>{try{console.log("Loading dashboard data for user:",t.email),g(!0),p(null);let e=t.email||t.id,s=new Promise((e,s)=>setTimeout(()=>s(Error("Dashboard load timeout")),15e3)),a=Promise.all([o.getLatestAssessment(e),o.getAssessmentHistory(e)]),[i,n]=await Promise.race([a,s]);console.log("Data loaded:",{latest:i,history:n}),m(i),u(n)}catch(s){console.error("Error loading dashboard data:",s),p("Failed to load dashboard data. Please try again.");let e={id:"fallback",user_id:t.email||t.id,overall_score:t.fundability_score||75,category_scores:{},created_at:new Date().toISOString(),completion_percentage:100,assessment_version:"2.0",status:"completed"};m(e),u([e])}finally{g(!1)}})()},[t,n]),n||h)?(0,a.jsx)(K,{}):b&&!d?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-500 text-lg font-semibold mb-2",children:"Error"}),(0,a.jsx)("div",{className:"text-gray-600",children:b}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]})}):(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 ".concat(s),children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Fundability Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitor your business funding readiness and track improvements over time"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Logged in as:"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(null==t?void 0:t.business_name)||(null==t?void 0:t.name)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null==t?void 0:t.email})]}),(0,a.jsxs)("button",{onClick:c,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 transition-colors",children:[(0,a.jsx)($.Z,{size:16,className:"mr-2"}),"Sign Out"]})]})]}),d&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",new Date(d.created_at).toLocaleDateString()]}),b&&(0,a.jsx)("p",{className:"text-sm text-amber-600 mt-1",children:"⚠️ Using cached data due to connection issues"})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(T,{assessment:d}),(0,a.jsx)(D,{assessment:d,history:x}),(0,a.jsx)(Y,{assessments:x})]})]})})}var J=t(80605);function G(e){let{onClose:s,onScoreUpdate:t}=e,{data:n}=(0,J.useSession)(),[r,l]=(0,i.useState)({hasEIN:!1,hasBusinessBank:!1,hasBusinessPhone:!1,hasWebsite:!1,hasBusinessAddress:!1,businessAge:0,hasBusinessCredit:!1,hasRevenue:!1,hasEmployees:!1,hasInsurance:!1}),[c,o]=(0,i.useState)(0),[d,m]=(0,i.useState)(!1),x=()=>{let e=[];return r.hasEIN||e.push("Obtain an EIN (Employer Identification Number)"),r.hasBusinessBank||e.push("Open a dedicated business bank account"),r.hasBusinessPhone||e.push("Set up a business phone line"),r.hasWebsite||e.push("Create a professional business website"),r.hasBusinessAddress||e.push("Establish a business address"),r.hasBusinessCredit||e.push("Start building business credit"),r.hasInsurance||e.push("Obtain business insurance"),r.businessAge<12&&e.push("Build business operating history"),e},u=async()=>{var e;if(null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.id)try{(await fetch("/api/fundability/save-assessment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:c,answers:r,recommendations:x()})})).ok&&(alert("Assessment saved successfully!"),s())}catch(e){console.error("Error saving assessment:",e)}};return d?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Fundability Score"}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-6xl font-bold text-blue-600 mb-2",children:c}),(0,a.jsx)("div",{className:"text-xl text-gray-600",children:"out of 100"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 mt-4",children:(0,a.jsx)("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-500",style:{width:"".concat(c,"%")}})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Recommendations to Improve:"}),(0,a.jsx)("ul",{className:"space-y-2",children:x().map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"text-blue-600 mr-2",children:"•"}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},s))})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:u,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Save Assessment"}),(0,a.jsx)("button",{onClick:s,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400",children:"Close"})]})]})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Fundability Assessment"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Do you have an EIN (Employer Identification Number)?"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasEIN",checked:!0===r.hasEIN,onChange:()=>l({...r,hasEIN:!0}),className:"mr-2"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasEIN",checked:!1===r.hasEIN,onChange:()=>l({...r,hasEIN:!1}),className:"mr-2"}),"No"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Do you have a dedicated business bank account?"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasBusinessBank",checked:!0===r.hasBusinessBank,onChange:()=>l({...r,hasBusinessBank:!0}),className:"mr-2"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasBusinessBank",checked:!1===r.hasBusinessBank,onChange:()=>l({...r,hasBusinessBank:!1}),className:"mr-2"}),"No"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Do you have a dedicated business phone number?"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasBusinessPhone",checked:!0===r.hasBusinessPhone,onChange:()=>l({...r,hasBusinessPhone:!0}),className:"mr-2"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasBusinessPhone",checked:!1===r.hasBusinessPhone,onChange:()=>l({...r,hasBusinessPhone:!1}),className:"mr-2"}),"No"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Do you have a business website?"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasWebsite",checked:!0===r.hasWebsite,onChange:()=>l({...r,hasWebsite:!0}),className:"mr-2"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasWebsite",checked:!1===r.hasWebsite,onChange:()=>l({...r,hasWebsite:!1}),className:"mr-2"}),"No"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"How old is your business (in months)?"}),(0,a.jsx)("input",{type:"number",min:"0",max:"120",value:r.businessAge,onChange:e=>l({...r,businessAge:parseInt(e.target.value)||0}),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Enter months in business"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Do you have established business credit?"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasBusinessCredit",checked:!0===r.hasBusinessCredit,onChange:()=>l({...r,hasBusinessCredit:!0}),className:"mr-2"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"hasBusinessCredit",checked:!1===r.hasBusinessCredit,onChange:()=>l({...r,hasBusinessCredit:!1}),className:"mr-2"}),"No"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{let e=0;r.hasEIN&&(e+=8),r.hasBusinessBank&&(e+=8),r.hasBusinessPhone&&(e+=6),r.hasWebsite&&(e+=6),r.hasBusinessAddress&&(e+=6),r.hasInsurance&&(e+=6),r.businessAge>=24?e+=15:r.businessAge>=12?e+=10:r.businessAge>=6&&(e+=5),r.hasRevenue&&(e+=10),r.hasEmployees&&(e+=5),r.hasBusinessCredit?e+=30:e+=10,o(e),m(!0),t(e)},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Calculate My Score"}),(0,a.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})})}function V(e){let{onClose:s,onScoreUpdate:t}=e,[n,r]=(0,i.useState)(0),[l,c]=(0,i.useState)({}),[o,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(0),u=[{name:"Business Registration",description:"Legal structure and registration status",questions:[{id:"hasEIN",question:"Do you have an EIN?",type:"boolean",weight:8},{id:"hasBusinessLicense",question:"Do you have required business licenses?",type:"boolean",weight:6},{id:"businessAge",question:"How old is your business (months)?",type:"number",weight:10},{id:"businessType",question:"Business structure",type:"select",options:["LLC","Corp","Partnership","Sole Proprietorship"],weight:6},{id:"businessAddress",question:"Do you have a dedicated business address?",type:"boolean",weight:5}]},{name:"Credit Profile",description:"Business and personal credit standing",questions:[{id:"hasBusinessCredit",question:"Do you have established business credit?",type:"boolean",weight:15},{id:"personalCreditScore",question:"Personal credit score range",type:"select",options:["750+","700-749","650-699","600-649","Below 600"],weight:12},{id:"hasBusinessCreditCard",question:"Do you have business credit cards?",type:"boolean",weight:8},{id:"hasTradeLines",question:"Do you have vendor trade lines?",type:"boolean",weight:10},{id:"creditUtilization",question:"Credit utilization ratio",type:"select",options:["0-10%","11-30%","31-50%","51-75%","75%+"],weight:8}]},{name:"Financial Documentation",description:"Financial records and documentation",questions:[{id:"hasFinancialStatements",question:"Do you have current financial statements?",type:"boolean",weight:10},{id:"hasTaxReturns",question:"Do you have business tax returns?",type:"boolean",weight:8},{id:"hasBankStatements",question:"Do you have 12 months of bank statements?",type:"boolean",weight:8},{id:"monthlyRevenue",question:"Average monthly revenue",type:"select",options:["$50k+","$25k-$49k","$10k-$24k","$5k-$9k","Under $5k"],weight:12},{id:"profitability",question:"Is your business profitable?",type:"boolean",weight:8}]}],h=e=>{let s=l[e.id];if("boolean"===e.type)return(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:e.id,checked:!0===s,onChange:()=>c({...l,[e.id]:!0}),className:"mr-2"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:e.id,checked:!1===s,onChange:()=>c({...l,[e.id]:!1}),className:"mr-2"}),"No"]})]});if("number"===e.type)return(0,a.jsx)("input",{type:"number",value:s||"",onChange:s=>c({...l,[e.id]:parseInt(s.target.value)||0}),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Enter number"});if("select"===e.type){var t;return(0,a.jsxs)("select",{value:s||"",onChange:s=>c({...l,[e.id]:s.target.value}),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Select option..."}),null===(t=e.options)||void 0===t?void 0:t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}return null};if(o)return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Advanced Fundability Assessment Results"}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-8xl font-bold text-purple-600 mb-4",children:m}),(0,a.jsx)("div",{className:"text-2xl text-gray-600 mb-4",children:"out of 100"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-6",children:(0,a.jsx)("div",{className:"bg-purple-600 h-6 rounded-full transition-all duration-1000",style:{width:"".concat(m,"%")}})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(30*Math.random()+60),"%"]})]},s))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{console.log("Advanced assessment saved:",{totalScore:m,answers:l}),alert("Advanced assessment saved successfully!"),s()},className:"flex-1 bg-purple-600 text-white py-3 px-6 rounded-md hover:bg-purple-700 text-lg font-semibold",children:"Save Advanced Assessment"}),(0,a.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 py-3 px-6 rounded-md hover:bg-gray-400",children:"Close"})]})]})});let g=u[n];return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Advanced Fundability Assessment"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsxs)("span",{children:["Category ",n+1," of ",u.length]}),(0,a.jsxs)("span",{children:[Math.round((n+1)/u.length*100),"% Complete"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-300",style:{width:"".concat((n+1)/u.length*100,"%")}})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:g.name}),(0,a.jsx)("p",{className:"text-gray-600",children:g.description})]}),(0,a.jsx)("div",{className:"space-y-6",children:g.questions.map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-purple-500 pl-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-3",children:[s+1,". ",e.question]}),h(e)]},e.id))}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>r(Math.max(0,n-1)),disabled:0===n,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 disabled:opacity-50",children:"Previous"}),n===u.length-1?(0,a.jsx)("button",{onClick:()=>{let e=0,s=0;u.forEach(t=>{t.questions.forEach(t=>{s+=t.weight;let a=l[t.id];if("boolean"===t.type&&!0===a)e+=t.weight;else if("number"===t.type&&a)"businessAge"===t.id&&(a>=24?e+=t.weight:a>=12?e+=.7*t.weight:a>=6&&(e+=.4*t.weight));else if("select"===t.type&&a){let s=t.options||[],i=s.indexOf(a);-1!==i&&(e+=t.weight*(1-i/s.length))}})});let a=Math.round(e/s*100);x(a),t(a),d(!0)},className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Calculate Score"}):(0,a.jsx)("button",{onClick:()=>r(Math.min(u.length-1,n+1)),className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Next Category"})]})]})})}let Q="force-dynamic";function X(){let{signIn:e}=r(),[s,t]=(0,i.useState)(""),[n,l]=(0,i.useState)(""),[c,o]=(0,i.useState)(!1),[d,m]=(0,i.useState)(""),x=async t=>{t.preventDefault(),o(!0),m("");let{error:a}=await e(s,n);a&&m(a.message),o(!1)};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Sign In"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Access your YBW Funds dashboard"})]}),(0,a.jsxs)("form",{onSubmit:x,className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-sm",children:[d&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:d}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>t(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:n,onChange:e=>l(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:c?"Signing in...":"Sign In"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Quick Login (Test Users):"}),(0,a.jsx)("div",{className:"space-y-2",children:[{email:"admin@ybwfunds.com",password:"admin123",name:"YBW Funds Admin (95/100)"},{email:"enterprise@ybwfunds.com",password:"enterprise123",name:"Chen Manufacturing (90/100)"},{email:"business@ybwfunds.com",password:"business123",name:"TechStart Solutions (85/100)"},{email:"demo@ybwfunds.com",password:"demo123",name:"Demo Business LLC (75/100)"}].map((e,s)=>(0,a.jsx)("button",{onClick:()=>{t(e.email),l(e.password)},className:"w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:e.name},s))})]})]})})}function ee(){let{user:e,loading:s,signOut:t}=r(),[n,l]=(0,i.useState)(!1),[c,o]=(0,i.useState)(!1),[d,m]=(0,i.useState)(58),[x,u]=(0,i.useState)("enhanced"),h=e=>{m(e)};return s?(0,a.jsx)(K,{}):e?(0,a.jsxs)(a.Fragment,{children:["enhanced"===x?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:(0,a.jsx)("button",{onClick:()=>u("classic"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors shadow-lg",children:"Switch to Classic View"})}),(0,a.jsx)(U,{})]}):(0,a.jsx)(()=>(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["YBW Funds Dashboard - ",e.business_name||e.name]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>u("enhanced"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Switch to Enhanced View"}),(0,a.jsx)("button",{onClick:t,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 transition-colors",children:"Sign Out"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:"F"})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Fundability Score"}),(0,a.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[e.fundability_score||d,"/100"]})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:"$"})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Available Funds"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"$125,000"})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:"A"})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Applications"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"3"})]})})]})})})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Fundability Assessment Tools"}),(0,a.jsx)("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:(0,a.jsx)("p",{children:"Choose the assessment type that best fits your needs. Get actionable insights to improve your business fundability."})}),(0,a.jsxs)("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{console.log("Quick Assessment clicked!"),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"⚡ Quick Assessment (6 questions)"}),(0,a.jsx)("button",{type:"button",onClick:()=>{console.log("Advanced Assessment clicked!"),o(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700",children:"\uD83C\uDFAF Advanced Assessment (125+ criteria)"}),(0,a.jsx)("button",{type:"button",onClick:()=>alert("Funding explorer coming soon!"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700",children:"\uD83D\uDD0D Explore Funding Options"})]})]})})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Business Profile"}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Business Name:"}),(0,a.jsx)("p",{className:"font-medium",children:e.business_name||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Email:"}),(0,a.jsx)("p",{className:"font-medium",children:e.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Phone:"}),(0,a.jsx)("p",{className:"font-medium",children:e.business_phone||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Website:"}),(0,a.jsx)("p",{className:"font-medium",children:e.business_website||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"EIN:"}),(0,a.jsx)("p",{className:"font-medium",children:e.business_ein||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Current Score:"}),(0,a.jsxs)("p",{className:"font-medium text-blue-600",children:[e.fundability_score,"/100"]})]})]})]})})})]})})}),{}),n&&(0,a.jsx)(G,{onClose:()=>l(!1),onScoreUpdate:h}),c&&(0,a.jsx)(V,{onClose:()=>o(!1),onScoreUpdate:h})]}):(0,a.jsx)(X,{})}}},function(e){e.O(0,[605,269,971,117,744],function(){return e(e.s=17328)}),_N_E=e.O()}]);