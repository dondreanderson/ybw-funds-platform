(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{64579:function(e,t,s){Promise.resolve().then(s.bind(s,90429))},90429:function(e,t,s){"use strict";s.d(t,{MarketplaceDashboard:function(){return m}});var i=s(57437),n=s(2265),r=s(80605),a=s(5526);class l{static getMatchedFundingOpportunities(e){return this.fundingOpportunities.map(t=>({...t,eligibilityScore:this.calculateFundingEligibility(t,e),recommendationReason:this.generateFundingRecommendation(t,e)})).filter(e=>e.eligibilityScore>20).sort((e,t)=>t.eligibilityScore-e.eligibilityScore)}static getMatchedTradeLineOpportunities(e){return this.tradeLineOpportunities.map(t=>({...t,eligibilityScore:this.calculateTradeLineEligibility(t,e),recommendationReason:this.generateTradeLineRecommendation(t,e)})).filter(e=>e.eligibilityScore>30).sort((e,t)=>t.eligibilityScore-e.eligibilityScore)}static calculateFundingEligibility(e,t){let s=0;return t.creditScore>=e.minCreditScore+50?s+=30:t.creditScore>=e.minCreditScore+20?s+=20:t.creditScore>=e.minCreditScore&&(s+=10),t.timeInBusiness>=2*e.minTimeInBusiness?s+=20:t.timeInBusiness>=e.minTimeInBusiness&&(s+=10),t.annualRevenue>=3*e.minAnnualRevenue?s+=25:t.annualRevenue>=2*e.minAnnualRevenue?s+=20:t.annualRevenue>=e.minAnnualRevenue&&(s+=15),e.industryRestrictions.includes(t.industry)||(s+=10),t.fundabilityScore>=80?s+=15:t.fundabilityScore>=60?s+=10:t.fundabilityScore>=40&&(s+=5),Math.min(s,100)}static calculateTradeLineEligibility(e,t){let s=0;return t.creditScore>=e.minCreditScore+100?s+=25:t.creditScore>=e.minCreditScore+50?s+=20:t.creditScore>=e.minCreditScore&&(s+=15),t.timeInBusiness>=2*e.timeInBusinessMin?s+=20:t.timeInBusiness>=e.timeInBusinessMin&&(s+=15),t.annualRevenue>=3*e.annualRevenueMin?s+=20:t.annualRevenue>=2*e.annualRevenueMin?s+=15:t.annualRevenue>=e.annualRevenueMin&&(s+=10),e.industryRestrictions.includes(t.industry)||(s+=15),"high"===e.creditBuildingImpact?s+=20:"medium"===e.creditBuildingImpact?s+=15:s+=10,Math.min(s,100)}static generateFundingRecommendation(e,t){let s=[];return t.creditScore>=e.minCreditScore+50&&s.push("Excellent credit score match"),t.annualRevenue>=2*e.minAnnualRevenue&&s.push("Strong revenue qualification"),t.timeInBusiness>=2*e.minTimeInBusiness&&s.push("Well-established business"),e.promoted&&s.push("Featured lender partner"),s.length>0?s.join(", "):"Good potential match for your business"}static generateTradeLineRecommendation(e,t){let s=[];return"high"===e.creditBuildingImpact&&s.push("High credit building impact"),e.creditReportingBureaus.length>=3&&s.push("Reports to all major bureaus"),0===e.fees.setupFee&&s.push("No setup fees"),t.currentTradeLines.length<3&&s.push("Perfect for building credit foundation"),s.length>0?s.join(", "):"Good opportunity for credit building"}}l.fundingOpportunities=[{id:"kabbage-loc",lenderName:"Kabbage",productType:"line_of_credit",minAmount:1e3,maxAmount:25e4,interestRateMin:12,interestRateMax:36,termMonthsMin:6,termMonthsMax:24,minCreditScore:560,minTimeInBusiness:12,minAnnualRevenue:5e4,industryRestrictions:[],requiresCollateral:!1,requiresPersonalGuarantee:!0,avgApprovalTime:"1-2 days",fees:{originationFee:0,maintenanceFee:0,earlyPaymentPenalty:!1},features:["Fast approval","No collateral","Flexible payments"],applicationUrl:"https://kabbage.com/application",description:"Fast, flexible business line of credit with competitive rates",eligibilityScore:0,recommendationReason:"",rating:4.2,reviewCount:1248,promoted:!1},{id:"ondeck-term",lenderName:"OnDeck",productType:"term_loan",minAmount:5e3,maxAmount:5e5,interestRateMin:15,interestRateMax:42,termMonthsMin:3,termMonthsMax:36,minCreditScore:600,minTimeInBusiness:12,minAnnualRevenue:1e5,industryRestrictions:["adult_entertainment","gambling"],requiresCollateral:!1,requiresPersonalGuarantee:!0,avgApprovalTime:"1-3 days",fees:{originationFee:2.5,earlyPaymentPenalty:!1},features:["Quick funding","No collateral","Transparent pricing"],applicationUrl:"https://ondeck.com/apply",description:"Term loans for established businesses with transparent pricing",eligibilityScore:0,recommendationReason:"",rating:4,reviewCount:892,promoted:!0},{id:"sba-loan",lenderName:"SBA Preferred Lender",productType:"sba_loan",minAmount:25e3,maxAmount:5e6,interestRateMin:6,interestRateMax:13,termMonthsMin:12,termMonthsMax:300,minCreditScore:680,minTimeInBusiness:24,minAnnualRevenue:15e4,industryRestrictions:["adult_entertainment","gambling","speculation"],requiresCollateral:!0,requiresPersonalGuarantee:!0,avgApprovalTime:"4-8 weeks",fees:{originationFee:1.5,maintenanceFee:0},features:["Low interest rates","Long terms","SBA guaranteed"],applicationUrl:"https://sba.gov/funding-programs/loans",description:"SBA guaranteed loans with the best rates and terms",eligibilityScore:0,recommendationReason:"",rating:4.5,reviewCount:445,promoted:!1}],l.tradeLineOpportunities=[{id:"uline-supplies",vendorName:"Uline",category:"office_supplies",serviceType:"Office & Warehouse Supplies",creditReportingBureaus:["experian","equifax","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:0,annualRevenueMin:0,industryRestrictions:[],creditLimit:{min:500,max:5e4,typical:5e3},paymentTerms:"Net 30",benefits:["Builds business credit","No personal guarantee","Easy approval"],fees:{setupFee:0,annualFee:0},applicationUrl:"https://uline.com/Account/CreditApplication",description:"Business supplies with excellent credit reporting to all bureaus",eligibilityScore:0,creditBuildingImpact:"high",recommendationReason:"",rating:4.6,reviewCount:2341,promoted:!0,estimatedCreditImpact:"+10-20 points in 3-6 months"},{id:"grainger-supplies",vendorName:"Grainger",category:"office_supplies",serviceType:"Industrial & Business Supplies",creditReportingBureaus:["experian","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:6,annualRevenueMin:25e3,industryRestrictions:[],creditLimit:{min:1e3,max:1e5,typical:1e4},paymentTerms:"Net 30",benefits:["Strong credit reporting","High credit limits","Industry leader"],fees:{setupFee:0,annualFee:0},applicationUrl:"https://grainger.com/credit-application",description:"Industrial supplies with strong credit reporting history",eligibilityScore:0,creditBuildingImpact:"high",recommendationReason:"",rating:4.4,reviewCount:1876,promoted:!1,estimatedCreditImpact:"+8-15 points in 4-6 months"},{id:"fleet-fuel",vendorName:"Fleet Fuel Cards",category:"fuel",serviceType:"Business Fuel Cards",creditReportingBureaus:["experian","equifax"],reportingFrequency:"monthly",minCreditScore:550,timeInBusinessMin:3,annualRevenueMin:5e4,industryRestrictions:[],creditLimit:{min:2e3,max:25e3,typical:7500},paymentTerms:"Net 15",benefits:["Fleet management","Credit building","Expense tracking"],fees:{setupFee:0,annualFee:25,transactionFee:0},applicationUrl:"https://fleetfuel.com/apply",description:"Fuel cards that build credit while managing fleet expenses",eligibilityScore:0,creditBuildingImpact:"medium",recommendationReason:"",rating:4.1,reviewCount:892,promoted:!1,estimatedCreditImpact:"+5-12 points in 3-6 months"},{id:"net30-accounts",vendorName:"Net 30 Vendor Network",category:"professional_services",serviceType:"Net 30 Vendor Accounts",creditReportingBureaus:["experian","equifax","dun_bradstreet"],reportingFrequency:"monthly",minCreditScore:0,timeInBusinessMin:0,annualRevenueMin:0,industryRestrictions:[],creditLimit:{min:250,max:5e3,typical:1500},paymentTerms:"Net 30",benefits:["Starter trade lines","Easy approval","Multiple vendors"],fees:{setupFee:89,annualFee:0},applicationUrl:"https://net30vendors.com/apply",description:"Starter trade lines perfect for new businesses building credit",eligibilityScore:0,creditBuildingImpact:"medium",recommendationReason:"",rating:4,reviewCount:634,promoted:!1,estimatedCreditImpact:"+3-8 points in 2-4 months"}];class c extends l{static async getUserProfile(e){try{let{data:t}=await a.O.from("user_profiles").select("*").eq("id",e).single();if(!t)return null;let{data:s}=await a.O.from("business_profiles").select("*").eq("user_id",e).single(),{data:i}=await a.O.from("advanced_fundability_assessments").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();return{id:e,email:t.email||"",creditScore:t.fundability_score||0,timeInBusiness:(null==s?void 0:s.years_in_business)||0,annualRevenue:(null==s?void 0:s.annual_revenue)||0,industry:(null==s?void 0:s.industry)||"",businessStructure:(null==s?void 0:s.business_structure)||"",fundingNeeds:{amount:1e5,purpose:"Working Capital",timeline:"30 days"},currentTradeLines:[],fundabilityScore:(null==i?void 0:i.overall_score)||0,businessProfile:s,latestAssessment:i}}catch(e){return console.error("Error fetching user profile:",e),null}}static async getPersonalizedFundingOpportunities(e){let t=await this.getUserProfile(e);return t?this.getMatchedFundingOpportunities(t).map(e=>({...e,matchAnalysis:this.calculateAdvancedFundingMatch(e,t)})).sort((e,t)=>t.matchAnalysis.score-e.matchAnalysis.score):[]}static async getPersonalizedTradelineOpportunities(e){let t=await this.getUserProfile(e);return t?this.getMatchedTradeLineOpportunities(t).map(e=>({...e,matchAnalysis:this.calculateAdvancedTradelineMatch(e,t)})).sort((e,t)=>t.matchAnalysis.score-e.matchAnalysis.score):[]}static calculateAdvancedFundingMatch(e,t){let s=0,i=[],n=[],r=[],a=[];t.fundabilityScore>=e.minCreditScore+100?(s+=30,i.push("Excellent credit profile for this lender")):t.fundabilityScore>=e.minCreditScore+50?(s+=25,i.push("Strong credit qualification")):t.fundabilityScore>=e.minCreditScore?(s+=15,i.push("Meets minimum credit requirements")):(n.push("Credit score below minimum requirement"),r.push("Focus on improving fundability score first"));let l=t.annualRevenue/e.minAnnualRevenue;l>=3?(s+=25,i.push("Revenue significantly exceeds requirements")):l>=2?(s+=20,i.push("Strong revenue qualification")):l>=1?(s+=15,i.push("Meets revenue requirements")):(n.push("Revenue below minimum requirement"),r.push("Consider revenue-based financing options"));let c=12*t.timeInBusiness/e.minTimeInBusiness;c>=2?(s+=20,i.push("Well-established business history")):c>=1?(s+=15,i.push("Meets time in business requirement")):(n.push("Business too new for this lender"),r.push("Consider new business financing options")),e.industryRestrictions.includes(t.industry)?n.push("Industry restrictions may apply"):(s+=10,i.push("Industry approved by lender"));let d=t.fundingNeeds.amount;d>=e.minAmount&&d<=e.maxAmount?(s+=15,i.push("Loan amount within lender range")):d<e.minAmount?(s+=5,n.push("Requested amount below minimum"),r.push("Consider increasing loan amount or finding alternative lenders")):(n.push("Requested amount exceeds maximum"),r.push("Consider multiple funding sources")),s>=80?(a.push("Apply immediately - excellent match"),a.push("Prepare financial documents"),a.push("Review loan terms carefully")):s>=60?(a.push("Review application requirements"),a.push("Address any concerns first"),a.push("Prepare strong application package")):(a.push("Improve fundability score"),a.push("Consider alternative lenders"),a.push("Work on business metrics"));let o="low";return n.length>=3?o="high":n.length>=1&&(o="medium"),{score:Math.min(s,100),strengths:i,concerns:n,recommendations:r,nextSteps:a,riskLevel:o}}static calculateAdvancedTradelineMatch(e,t){let s=0,i=[],n=[],r=[],a=[];"high"===e.creditBuildingImpact?(s+=30,i.push("High credit building potential")):"medium"===e.creditBuildingImpact?(s+=20,i.push("Moderate credit building impact")):s+=10;let l=e.creditReportingBureaus.length;l>=3?(s+=25,i.push("Reports to all major credit bureaus")):l>=2?(s+=20,i.push("Reports to multiple bureaus")):s+=15,t.fundabilityScore>=e.minCreditScore+50?(s+=20,i.push("Excellent qualification profile")):t.fundabilityScore>=e.minCreditScore?(s+=15,i.push("Meets qualification requirements")):(s+=5,n.push("May need to improve credit first")),12*t.timeInBusiness>=2*e.timeInBusinessMin?(s+=15,i.push("Well-established for this tradeline")):12*t.timeInBusiness>=e.timeInBusinessMin?(s+=10,i.push("Meets time requirements")):n.push("Business may be too new"),0===e.fees.setupFee?(s+=10,i.push("No setup fees required")):100>(e.fees.setupFee||0)?(s+=7,i.push("Low setup costs")):(s+=3,n.push("Higher setup fees required")),"high"===e.creditBuildingImpact&&r.push("Prioritize this tradeline for maximum impact"),t.fundabilityScore<60?(r.push("Start with easier approval tradelines"),a.push("Apply for starter business accounts")):a.push("Apply for multiple accounts for faster building"),a.push("Ensure timely payments for maximum benefit"),a.push("Monitor credit reports monthly");let c="low";return n.length>=2?c="high":n.length>=1&&(c="medium"),{score:Math.min(s,100),strengths:i,concerns:n,recommendations:r,nextSteps:a,riskLevel:c}}static async saveFundingMatches(e,t){try{let s=t.map(t=>({user_id:e,funding_opportunity_id:t.id,match_score:t.eligibilityScore,is_prequalified:t.eligibilityScore>=70,created_at:new Date().toISOString()}));await a.O.from("user_funding_matches").upsert(s,{onConflict:"user_id,funding_opportunity_id"})}catch(e){console.error("Error saving funding matches:",e)}}static async trackOpportunityView(e,t,s){try{await a.O.from("marketplace_analytics").insert({user_id:e,opportunity_id:t,opportunity_type:s,action:"view"})}catch(e){console.error("Error tracking view:",e)}}static async trackOpportunityApplication(e,t,s){try{await a.O.from("marketplace_analytics").insert({user_id:e,opportunity_id:t,opportunity_type:s,action:"apply"}),"funding"===s&&await a.O.from("funding_applications").insert({user_id:e,opportunity_id:t,status:"applied",applied_at:new Date().toISOString()})}catch(e){console.error("Error tracking application:",e)}}}function d(e){var t;let{opportunity:s,userId:r,onApply:a,onSave:l}=e,[d,o]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),p=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),h=e=>"".concat(e.toFixed(1),"%"),x=async()=>{u(!0);try{await c.trackOpportunityApplication(r,s.id,"funding"),a&&a(s),window.open(s.applicationUrl,"_blank")}catch(e){console.error("Error applying:",e)}finally{u(!1)}},g=async()=>{try{l&&l(s)}catch(e){console.error("Error saving:",e)}},y=async()=>{await c.trackOpportunityView(r,s.id,"funding"),o(!d)},b=(t=s.matchAnalysis.score)>=90?{grade:"A+",color:"text-green-600",bg:"bg-green-50"}:t>=80?{grade:"A",color:"text-green-600",bg:"bg-green-50"}:t>=70?{grade:"B+",color:"text-blue-600",bg:"bg-blue-50"}:t>=60?{grade:"B",color:"text-blue-600",bg:"bg-blue-50"}:t>=50?{grade:"C",color:"text-yellow-600",bg:"bg-yellow-50"}:{grade:"D",color:"text-red-600",bg:"bg-red-50"};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:s.lenderName}),s.promoted&&(0,i.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Featured"})]}),(0,i.jsx)("p",{className:"text-gray-600 capitalize",children:s.productType.replace("_"," ")})]}),(0,i.jsxs)("div",{className:"".concat(b.bg," ").concat(b.color," px-3 py-2 rounded-lg text-center"),children:[(0,i.jsx)("div",{className:"text-lg font-bold",children:b.grade}),(0,i.jsx)("div",{className:"text-xs",children:"Match"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Amount"}),(0,i.jsxs)("p",{className:"font-semibold",children:[p(s.minAmount)," - ",p(s.maxAmount)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Rate"}),(0,i.jsxs)("p",{className:"font-semibold",children:[h(s.interestRateMin)," - ",h(s.interestRateMax)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Term"}),(0,i.jsxs)("p",{className:"font-semibold",children:[s.termMonthsMin," - ",s.termMonthsMax," months"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Approval Time"}),(0,i.jsx)("p",{className:"font-semibold",children:s.avgApprovalTime})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)("span",{className:"text-sm text-gray-500",children:"Risk Level:"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"low":return"text-green-600 bg-green-50";case"medium":return"text-yellow-600 bg-yellow-50";case"high":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(s.matchAnalysis.riskLevel)),children:s.matchAnalysis.riskLevel.toUpperCase()})]}),(0,i.jsx)("div",{className:"mb-4",children:s.matchAnalysis.strengths.slice(0,2).map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center text-green-700 text-sm mb-1",children:[(0,i.jsx)("span",{className:"mr-2",children:"✓"}),e]},t))}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:x,disabled:m,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:m?"Applying...":"Apply Now"}),(0,i.jsx)("button",{onClick:g,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Save"}),(0,i.jsx)("button",{onClick:y,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:d?"Less":"Details"})]})]}),d&&(0,i.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Eligibility Analysis"}),s.matchAnalysis.strengths.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Strengths"}),(0,i.jsx)("ul",{className:"space-y-1",children:s.matchAnalysis.strengths.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-green-600 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5",children:"✓"}),e]},t))})]}),s.matchAnalysis.concerns.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-red-700 mb-2",children:"Potential Concerns"}),(0,i.jsx)("ul",{className:"space-y-1",children:s.matchAnalysis.concerns.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-red-600 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5",children:"⚠"}),e]},t))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements & Features"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Minimum Credit Score: ",(0,i.jsx)("span",{className:"font-medium",children:s.minCreditScore})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Time in Business: ",(0,i.jsxs)("span",{className:"font-medium",children:[s.minTimeInBusiness," months"]})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Minimum Revenue: ",(0,i.jsx)("span",{className:"font-medium",children:p(s.minAnnualRevenue)})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Personal Guarantee: ",(0,i.jsx)("span",{className:"font-medium",children:s.requiresPersonalGuarantee?"Required":"Not Required"})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Collateral: ",(0,i.jsx)("span",{className:"font-medium",children:s.requiresCollateral?"Required":"Not Required"})]})})]}),s.features.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Features"}),(0,i.jsx)("ul",{className:"space-y-1",children:s.features.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-600 flex items-center",children:[(0,i.jsx)("span",{className:"mr-2",children:"•"}),e]},t))})]})]})]}),s.matchAnalysis.recommendations.length>0&&(0,i.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-300",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Recommendations"}),(0,i.jsx)("ul",{className:"space-y-2",children:s.matchAnalysis.recommendations.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-blue-600 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5",children:"\uD83D\uDCA1"}),e]},t))})]}),s.matchAnalysis.nextSteps.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Next Steps"}),(0,i.jsx)("ol",{className:"space-y-2",children:s.matchAnalysis.nextSteps.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5 bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium",children:t+1}),e]},t))})]})]})]})}function o(e){var t;let{opportunity:s,userId:r,onApply:a,onSave:l}=e,[d,o]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),p=e=>{switch(e){case"experian":return"bg-blue-100 text-blue-800";case"equifax":return"bg-green-100 text-green-800";case"dun_bradstreet":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},h=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),x=async()=>{u(!0);try{await c.trackOpportunityApplication(r,s.id,"tradeline"),a&&a(s),window.open(s.applicationUrl,"_blank")}catch(e){console.error("Error applying:",e)}finally{u(!1)}},g=async()=>{try{l&&l(s)}catch(e){console.error("Error saving:",e)}},y=async()=>{await c.trackOpportunityView(r,s.id,"tradeline"),o(!d)},b=(t=s.matchAnalysis.score)>=90?{grade:"A+",color:"text-green-600",bg:"bg-green-50"}:t>=80?{grade:"A",color:"text-green-600",bg:"bg-green-50"}:t>=70?{grade:"B+",color:"text-blue-600",bg:"bg-blue-50"}:t>=60?{grade:"B",color:"text-blue-600",bg:"bg-blue-50"}:t>=50?{grade:"C",color:"text-yellow-600",bg:"bg-yellow-50"}:{grade:"D",color:"text-red-600",bg:"bg-red-50"};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:s.vendorName}),s.promoted&&(0,i.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Featured"})]}),(0,i.jsx)("p",{className:"text-gray-600",children:s.serviceType})]}),(0,i.jsxs)("div",{className:"".concat(b.bg," ").concat(b.color," px-3 py-2 rounded-lg text-center"),children:[(0,i.jsx)("div",{className:"text-lg font-bold",children:b.grade}),(0,i.jsx)("div",{className:"text-xs",children:"Match"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Credit Building Impact"}),(0,i.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"high":return"text-green-600 bg-green-50";case"medium":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}})(s.creditBuildingImpact)),children:[s.creditBuildingImpact.toUpperCase()," IMPACT"]}),(0,i.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:s.estimatedCreditImpact})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Reports To"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-1",children:s.creditReportingBureaus.map((e,t)=>(0,i.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(p(e)),children:e.replace("_"," ").toUpperCase()},t))})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Credit Limit"}),(0,i.jsxs)("p",{className:"font-semibold",children:[h(s.creditLimit.min)," - ",h(s.creditLimit.max)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Terms"}),(0,i.jsx)("p",{className:"font-semibold",children:s.paymentTerms})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Setup Fee"}),(0,i.jsx)("p",{className:"font-semibold",children:s.fees.setupFee?h(s.fees.setupFee):"Free"})]})]}),(0,i.jsx)("div",{className:"mb-4",children:s.matchAnalysis.strengths.slice(0,2).map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center text-green-700 text-sm mb-1",children:[(0,i.jsx)("span",{className:"mr-2",children:"✓"}),e]},t))}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:x,disabled:m,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:m?"Applying...":"Apply Now"}),(0,i.jsx)("button",{onClick:g,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Save"}),(0,i.jsx)("button",{onClick:y,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:d?"Less":"Details"})]})]}),d&&(0,i.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Credit Building Strategy"}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,i.jsxs)("p",{children:["Min Credit Score: ",(0,i.jsx)("span",{className:"font-medium",children:s.minCreditScore||"None"})]}),(0,i.jsxs)("p",{children:["Time in Business: ",(0,i.jsxs)("span",{className:"font-medium",children:[s.timeInBusinessMin," months"]})]}),(0,i.jsxs)("p",{children:["Min Revenue: ",(0,i.jsx)("span",{className:"font-medium",children:h(s.annualRevenueMin)})]})]})]}),s.benefits.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Benefits"}),(0,i.jsx)("ul",{className:"space-y-1",children:s.benefits.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-600 flex items-center",children:[(0,i.jsx)("span",{className:"mr-2 text-green-500",children:"•"}),e]},t))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Match Analysis"}),s.matchAnalysis.strengths.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Why This Works"}),(0,i.jsx)("ul",{className:"space-y-1",children:s.matchAnalysis.strengths.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-green-600 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5",children:"✓"}),e]},t))})]}),s.matchAnalysis.concerns.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-yellow-700 mb-2",children:"Considerations"}),(0,i.jsx)("ul",{className:"space-y-1",children:s.matchAnalysis.concerns.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-yellow-600 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5",children:"⚠"}),e]},t))})]})]})]}),s.matchAnalysis.recommendations.length>0&&(0,i.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-300",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Expert Recommendations"}),(0,i.jsx)("ul",{className:"space-y-2",children:s.matchAnalysis.recommendations.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-blue-600 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5",children:"\uD83D\uDCA1"}),e]},t))})]}),s.matchAnalysis.nextSteps.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Action Plan"}),(0,i.jsx)("ol",{className:"space-y-2",children:s.matchAnalysis.nextSteps.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[(0,i.jsx)("span",{className:"mr-2 mt-0.5 bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium",children:t+1}),e]},t))})]})]})]})}function m(){let{data:e}=(0,r.useSession)(),[t,s]=(0,n.useState)("funding"),[a,l]=(0,n.useState)([]),[c,m]=(0,n.useState)([]),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)(""),[g,y]=(0,n.useState)(!1),[b,f]=(0,n.useState)({minAmount:0,maxAmount:1e6,productTypes:[],creditScoreRange:[500,850],riskLevel:[]});(0,n.useEffect)(()=>{(null==e?void 0:e.user)&&v()},[e,t]);let v=async()=>{p(!0);try{var s;let i=await fetch("/api/marketplace/opportunities?type=".concat(t,"&userId=").concat(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id)),n=await i.json();n.success&&("funding"===t?l(n.opportunities):m(n.opportunities))}catch(e){console.error("Error loading opportunities:",e)}finally{p(!1)}},N=async t=>{try{var s;await fetch("/api/marketplace/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id,opportunityId:t.id,type:"funding"})})}catch(e){console.error("Error tracking application:",e)}},j=async t=>{try{var s;await fetch("/api/marketplace/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id,opportunityId:t.id,type:"tradeline"})})}catch(e){console.error("Error tracking application:",e)}},w=async s=>{try{var i;await fetch("/api/marketplace/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.id,opportunityId:s.id,type:t})})}catch(e){console.error("Error saving opportunity:",e)}},S=a.filter(e=>(!h||!!e.lenderName.toLowerCase().includes(h.toLowerCase()))&&(!(b.minAmount>0)||!(e.maxAmount<b.minAmount))&&(!(b.maxAmount<1e6)||!(e.minAmount>b.maxAmount))&&(!(b.productTypes.length>0)||!!b.productTypes.includes(e.productType))&&(!(b.riskLevel.length>0)||!!b.riskLevel.includes(e.matchAnalysis.riskLevel))),A=c.filter(e=>!h||!!e.vendorName.toLowerCase().includes(h.toLowerCase()));return e?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Funding Marketplace"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Discover personalized funding and credit building opportunities"})]}),(0,i.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,i.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,i.jsx)("button",{onClick:()=>s("funding"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("funding"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDCB0 Funding Opportunities"}),(0,i.jsx)("button",{onClick:()=>s("tradelines"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("tradelines"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDCC8 Credit Building"})]})}),(0,i.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("input",{type:"text",placeholder:"Search ".concat("funding"===t?"lenders":"vendors","..."),value:h,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,i.jsxs)("button",{onClick:()=>y(!g),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:["\uD83D\uDD0D Filters",g&&(0,i.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"ON"})]}),(0,i.jsx)("button",{onClick:v,disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Loading...":"Refresh"})]}),g&&"funding"===t&&(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Filter Options"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount Range"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:b.minAmount,onChange:e=>f(t=>({...t,minAmount:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:b.maxAmount,onChange:e=>f(t=>({...t,maxAmount:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Type"}),(0,i.jsxs)("select",{multiple:!0,value:b.productTypes,onChange:e=>{let t=Array.from(e.target.selectedOptions,e=>e.value);f(e=>({...e,productTypes:t}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,i.jsx)("option",{value:"term_loan",children:"Term Loan"}),(0,i.jsx)("option",{value:"line_of_credit",children:"Line of Credit"}),(0,i.jsx)("option",{value:"sba_loan",children:"SBA Loan"}),(0,i.jsx)("option",{value:"equipment_financing",children:"Equipment Financing"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),(0,i.jsx)("div",{className:"space-y-2",children:["low","medium","high"].map(e=>(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:b.riskLevel.includes(e),onChange:t=>{t.target.checked?f(t=>({...t,riskLevel:[...t.riskLevel,e]})):f(t=>({...t,riskLevel:t.riskLevel.filter(t=>t!==e)}))},className:"mr-2"}),e.charAt(0).toUpperCase()+e.slice(1)," Risk"]},e))})]})]})]}),u?(0,i.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,i.jsx)("div",{className:"space-y-6",children:"funding"===t?S.length>0?S.map(t=>{var s;return(0,i.jsx)(d,{opportunity:t,userId:(null===(s=e.user)||void 0===s?void 0:s.id)||"",onApply:N,onSave:w},t.id)}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCBC"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No funding opportunities found"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]}):A.length>0?A.map(t=>{var s;return(0,i.jsx)(o,{opportunity:t,userId:(null===(s=e.user)||void 0===s?void 0:s.id)||"",onApply:j,onSave:w},t.id)}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCC8"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tradeline opportunities found"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or take an assessment first"})]})})]})}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Sign In Required"}),(0,i.jsx)("p",{className:"text-gray-600 mb-8",children:"Please sign in to access the marketplace"}),(0,i.jsx)("button",{onClick:()=>window.location.href="/auth/signin",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Sign In"})]})})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});let i=(0,s(96580).eI)("https://fzvtzzzsoccptvgihxfl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ6dnR6enpzb2NjcHR2Z2loeGZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNTAwNjksImV4cCI6MjA2NjcyNjA2OX0.UFY3vSerY963T2cqbgrhstgZfhkgfN5KN7lZUVZ8DLA")}},function(e){e.O(0,[605,580,971,117,744],function(){return e(e.s=64579)}),_N_E=e.O()}]);