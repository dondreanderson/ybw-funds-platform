(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{936:function(e,s,t){Promise.resolve().then(t.bind(t,8762))},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},8762:function(e,s,t){"use strict";t.d(s,{AssessmentWizard:function(){return g}});var r=t(7437),n=t(2265),i=t(8386);let a=[{id:"has_ein",category:"Business Foundation",question:"Do you have an Employer Identification Number (EIN) for your business?",type:"boolean",required:!0,weight:1.2,isCritical:!0,helpText:"An EIN is essential for business banking, credit, and tax purposes."},{id:"business_structure",category:"Business Foundation",question:"What is your business legal structure?",type:"select",options:["Corporation","LLC","Partnership","Sole Proprietorship"],required:!0,weight:1,isCritical:!0,helpText:"Your business structure affects liability, taxes, and funding opportunities."},{id:"business_license",category:"Business Foundation",question:"Do you have all required business licenses for your industry?",type:"boolean",required:!0,weight:1.1,isCritical:!0,helpText:"Proper licensing demonstrates compliance and legitimacy."},{id:"business_address",category:"Business Foundation",question:"Do you have a dedicated business address (not a PO Box)?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"A physical address builds credibility with lenders and vendors."},{id:"time_in_business",category:"Business Foundation",question:"How many years has your business been operating?",type:"number",required:!0,weight:1,isCritical:!1,helpText:"Longer operating history generally improves funding opportunities."},{id:"business_bank_account",category:"Banking & Finance",question:"Do you have a dedicated business bank account?",type:"boolean",required:!0,weight:1.3,isCritical:!0,helpText:"Separate business banking is crucial for credit building and financial management."},{id:"annual_revenue",category:"Banking & Finance",question:"What is your annual business revenue?",type:"number",required:!0,weight:1.2,isCritical:!1,helpText:"Higher revenue demonstrates business viability and repayment capacity."},{id:"business_credit_card",category:"Banking & Finance",question:"Do you have a business credit card?",type:"boolean",required:!0,weight:1.1,isCritical:!1,helpText:"Business credit cards help build credit history and manage cash flow."},{id:"accounting_system",category:"Banking & Finance",question:"Do you use a professional accounting system (QuickBooks, etc.)?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"Professional accounting demonstrates financial organization and preparedness."},{id:"duns_number",category:"Business Credit Profile",question:"Do you have a DUNS number from Dun & Bradstreet?",type:"boolean",required:!0,weight:1.4,isCritical:!0,helpText:"DUNS numbers are essential for building business credit and accessing financing."},{id:"trade_references",category:"Business Credit Profile",question:"Do you have established trade credit accounts with vendors?",type:"select",options:["Yes, 5+ accounts","Yes, 2-4 accounts","Yes, 1 account","No"],required:!0,weight:1.3,isCritical:!1,helpText:"Trade credit helps establish payment history and creditworthiness."},{id:"business_credit_monitoring",category:"Business Credit Profile",question:"Do you monitor your business credit reports regularly?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"Regular monitoring helps catch errors and track credit building progress."},{id:"personal_credit_score",category:"Business Credit Profile",question:"What is your personal credit score range?",type:"select",options:["750+","700-749","650-699","600-649","550-599","Below 550"],required:!0,weight:1.2,isCritical:!0,helpText:"Personal credit often affects business financing approval and terms."},{id:"business_website",category:"Marketing Presence",question:"Do you have a professional business website?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"A professional website builds credibility and demonstrates business legitimacy."},{id:"google_business_listing",category:"Marketing Presence",question:"Do you have a Google My Business listing?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"Google listings improve visibility and credibility with lenders."},{id:"business_phone",category:"Marketing Presence",question:"Do you have a dedicated business phone number?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"A dedicated business phone adds professionalism and separates business from personal."},{id:"business_plan",category:"Documentation",question:"Do you have a current, comprehensive business plan?",type:"boolean",required:!0,weight:1.1,isCritical:!1,helpText:"Business plans demonstrate strategic thinking and planning to lenders."},{id:"financial_statements",category:"Documentation",question:"Do you have current financial statements (P&L, Balance Sheet)?",type:"boolean",required:!0,weight:1.2,isCritical:!0,helpText:"Current financial statements are required for most business financing."},{id:"tax_returns",category:"Documentation",question:"Are your business tax returns current and filed?",type:"boolean",required:!0,weight:1.2,isCritical:!0,helpText:"Current tax returns prove income and demonstrate compliance."},{id:"insurance_coverage",category:"Documentation",question:"Do you have appropriate business insurance coverage?",type:"boolean",required:!0,weight:1,isCritical:!1,helpText:"Insurance protects your business and demonstrates risk management."}];function o(e){let{question:s,value:t}=e,{setResponse:n}=(0,i.Y)(),a=e=>{n(s.id,e)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:s.category}),s.isCritical&&(0,r.jsx)("span",{className:"inline-block bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full",children:"Critical"})]}),(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:[s.question,s.required&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),s.helpText&&(0,r.jsxs)("p",{className:"text-gray-600 text-sm bg-blue-50 p-3 rounded-lg",children:["\uD83D\uDCA1 ",s.helpText]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:["boolean"===s.type&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)("button",{onClick:()=>a(!0),className:"p-4 rounded-lg border-2 transition-all ".concat(!0===t?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("span",{className:"text-2xl mr-2",children:"✅"}),(0,r.jsx)("span",{className:"font-medium",children:"Yes"})]})}),(0,r.jsx)("button",{onClick:()=>a(!1),className:"p-4 rounded-lg border-2 transition-all ".concat(!1===t?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-gray-300"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("span",{className:"text-2xl mr-2",children:"❌"}),(0,r.jsx)("span",{className:"font-medium",children:"No"})]})})]}),"select"===s.type&&s.options&&(0,r.jsx)("div",{className:"space-y-3",children:s.options.map(e=>(0,r.jsx)("button",{onClick:()=>a(e),className:"w-full p-4 text-left rounded-lg border-2 transition-all ".concat(t===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border-2 mr-3 ".concat(t===e?"bg-blue-500 border-blue-500":"border-gray-300"),children:t===e&&(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})}),(0,r.jsx)("span",{className:"font-medium",children:e})]})},e))}),"number"===s.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"number",value:t||"",onChange:e=>a(e.target.value),placeholder:"Enter amount...",className:"w-full p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none text-lg"}),s.id.includes("revenue")&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Enter your annual revenue in dollars (e.g., 250000 for $250,000)"})]}),"text"===s.type&&(0,r.jsx)("textarea",{value:t||"",onChange:e=>a(e.target.value),placeholder:"Enter your answer...",rows:4,className:"w-full p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]}),void 0!==t&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Your answer:"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"boolean"==typeof t?t?"Yes":"No":t})]})]})}function l(e){let{currentStep:s,totalSteps:t,score:n}=e,i=t>0?(s+1)/t*100:0;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assessment Progress"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Question ",s+1," of ",t]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Current Score"})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(i,"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:[Math.round(i),"% Complete"]}),(0,r.jsxs)("span",{children:[t-s-1," questions remaining"]})]})]})}var c=t(9376);function u(e){let{currentStep:s,totalSteps:t,canGoNext:n,isComplete:a}=e,{nextStep:o,prevStep:l,completeAssessment:u,state:d}=(0,i.Y)(),g=(0,c.useRouter)(),p=async()=>{await u(),g.push("/assessment/results")},m=s===t-1,h=0===s;return(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:l,disabled:h,className:"px-6 py-3 rounded-lg font-medium transition-all ".concat(h?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"← Previous"}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:Array.from({length:t},(e,t)=>(0,r.jsx)("div",{className:"w-2 h-2 rounded-full transition-all ".concat(t<=s?"bg-blue-500":"bg-gray-300")},t))}),(0,r.jsx)("button",{onClick:()=>{s<t-1?o():p()},disabled:!n||d.loading,className:"px-6 py-3 rounded-lg font-medium transition-all ".concat(!n||d.loading?"bg-gray-100 text-gray-400 cursor-not-allowed":m?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"),children:d.loading?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):m?"Complete Assessment →":"Next →"})]}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[!n&&"Please answer the question to continue",n&&!m&&"Click Next to continue or Previous to go back",n&&m&&"Ready to complete your assessment!"]})})]})}function d(e){let{currentScore:s,categoryScores:t,completedQuestions:n,totalQuestions:i}=e,a=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600";return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 sticky top-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Live Score Tracker"}),(0,r.jsxs)("div",{className:"text-center p-4 rounded-lg mb-6 ".concat(s>=80?"bg-green-100":s>=60?"bg-yellow-100":s>=40?"bg-orange-100":"bg-red-100"),children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Current Fundability Score"}),(0,r.jsx)("p",{className:"text-3xl font-bold ".concat(a(s)),children:s}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Based on ",n," of ",i," questions"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Category Scores"}),Object.entries(t).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 truncate",children:s}),(0,r.jsx)("span",{className:"text-sm font-bold ".concat(a(t)),children:Math.round(t)})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(t,100),"%")}})})]},s)}),0===Object.keys(t).length&&(0,r.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Start answering questions to see category breakdowns"})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 Quick Tips"}),(0,r.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Answer all questions for accurate scoring"}),(0,r.jsx)("li",{children:"• Critical questions have higher impact"}),(0,r.jsx)("li",{children:"• You can go back to change answers"})]})]})]})}function g(){let{state:e,dispatch:s}=(0,i.Y)();if((0,n.useEffect)(()=>{s({type:"INITIALIZE",questions:a})},[s]),0===e.questions.length)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});let t=e.questions[e.currentStep];return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Business Fundability Assessment"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Answer questions about your business to get your comprehensive fundability score"})]}),(0,r.jsx)(l,{currentStep:e.currentStep,totalSteps:e.totalSteps,score:e.currentScore}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsx)(o,{question:t,value:e.responses[t.id],onChange:e=>{}}),(0,r.jsx)(u,{currentStep:e.currentStep,totalSteps:e.totalSteps,canGoNext:void 0!==e.responses[t.id],isComplete:e.isComplete})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(d,{currentScore:e.currentScore,categoryScores:e.categoryScores,completedQuestions:Object.keys(e.responses).length,totalQuestions:e.totalSteps})})]})]})}},8386:function(e,s,t){"use strict";t.d(s,{AssessmentProvider:function(){return c},Y:function(){return u}});var r=t(7437),n=t(3655),i=t(2265);let a={currentStep:0,totalSteps:0,responses:{},currentScore:0,categoryScores:{},isComplete:!1,questions:[],loading:!1,error:null};function o(e,s){switch(s.type){case"INITIALIZE":return{...e,questions:s.questions,totalSteps:s.questions.length,currentStep:0,responses:{},currentScore:0,categoryScores:{},isComplete:!1};case"SET_RESPONSE":return{...e,responses:{...e.responses,[s.questionId]:s.value}};case"NEXT_STEP":return{...e,currentStep:Math.min(e.currentStep+1,e.totalSteps-1)};case"PREV_STEP":return{...e,currentStep:Math.max(e.currentStep-1,0)};case"SET_STEP":return{...e,currentStep:Math.max(0,Math.min(s.step,e.totalSteps-1))};case"UPDATE_SCORE":return{...e,currentScore:s.score,categoryScores:s.categoryScores};case"COMPLETE_ASSESSMENT":return{...e,isComplete:!0};case"RESET_ASSESSMENT":return{...a,questions:e.questions,totalSteps:e.questions.length};case"SET_LOADING":return{...e,loading:s.loading};case"SET_ERROR":return{...e,error:s.error};default:return e}}let l=(0,i.createContext)(void 0);function c(e){let{children:s}=e,[t,c]=(0,i.useReducer)(o,a),u=()=>{let e=Object.entries(t.responses).map(e=>{let[s,r]=e,n=t.questions.find(e=>e.id===s);return n?{category:n.category,criterionId:n.id,criterionName:n.question,responseValue:r,responseType:n.type,pointsEarned:function(e,s){switch(e.type){case"boolean":return!0===s?100:0;case"select":return({Excellent:100,"Very Good":85,Good:70,Fair:55,Poor:25,Yes:100,No:0,Corporation:100,LLC:85,Partnership:60,"Sole Proprietorship":40})[s]||0;case"number":if(e.id.includes("revenue")){let e=parseFloat(s)||0;if(e>=1e6)return 100;if(e>=5e5)return 85;if(e>=25e4)return 70;if(e>=1e5)return 55;if(e>=5e4)return 40;return 25}if(e.id.includes("years")||e.id.includes("time")){let e=parseFloat(s)||0;if(e>=5)return 100;if(e>=3)return 80;if(e>=2)return 60;if(e>=1)return 40;return 20}return s>0?75:0;case"text":return s&&s.trim()?80:0;default:return 0}}(n,r),pointsPossible:100,weightFactor:n.weight,isCritical:n.isCritical}:null}).filter(Boolean),s=e.reduce((e,s)=>e+s.pointsEarned,0),r=100*e.length,n={};Object.entries(e.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{})).forEach(e=>{let[s,t]=e,r=t.reduce((e,s)=>e+s.pointsEarned,0),i=100*t.length;n[s]=i>0?r/i*100:0}),c({type:"UPDATE_SCORE",score:Math.round(r>0?s/r*100:0),categoryScores:n})},d=async()=>{try{c({type:"SET_LOADING",loading:!0}),c({type:"COMPLETE_ASSESSMENT"}),c({type:"SET_LOADING",loading:!1})}catch(e){c({type:"SET_ERROR",error:e instanceof Error?e.message:"Unknown error"}),c({type:"SET_LOADING",loading:!1})}},g=async()=>{try{console.log("\uD83D\uDCBE Saving assessment and updating dashboard..."),c({type:"SET_LOADING",loading:!0});let e={responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores,completedAt:new Date().toISOString(),questions:t.questions};localStorage.setItem("lastAssessmentResults",JSON.stringify(e)),console.log("✅ Saved to localStorage:",e);try{let{data:e}=await n.KD.getCurrentUserProfile();e&&(console.log("\uD83D\uDC64 Updating user profile..."),await n.KD.updateFundabilityScore(e.id,t.currentScore),await n.KD.incrementAssessmentCount(e.id),console.log("✅ Database updated successfully"))}catch(e){console.warn("⚠️ Database update failed, but localStorage saved:",e)}return console.log("\uD83D\uDD14 Triggering dashboard refresh..."),window.dispatchEvent(new CustomEvent("dashboardRefresh")),setTimeout(()=>{window.dispatchEvent(new CustomEvent("dashboardRefresh"))},100),window.dispatchEvent(new StorageEvent("storage",{key:"lastAssessmentResults",newValue:JSON.stringify(e)})),c({type:"SET_LOADING",loading:!1}),!0}catch(e){return console.error("❌ Error saving assessment:",e),c({type:"SET_LOADING",loading:!1}),!1}};return(0,r.jsx)(l.Provider,{value:{state:t,dispatch:c,setResponse:(e,s)=>{c({type:"SET_RESPONSE",questionId:e,value:s}),setTimeout(()=>u(),100)},nextStep:()=>{c({type:"NEXT_STEP"})},prevStep:()=>{c({type:"PREV_STEP"})},goToStep:e=>{c({type:"SET_STEP",step:e})},calculateScore:u,completeAssessment:d,resetAssessment:()=>{c({type:"RESET_ASSESSMENT"})},saveAndUpdateDashboard:g,getReportData:()=>({responses:t.responses,currentScore:t.currentScore,categoryScores:t.categoryScores,questions:t.questions,completedQuestions:Object.keys(t.responses).length})},children:s})}function u(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAssessment must be used within an AssessmentProvider");return e}}},function(e){e.O(0,[580,655,971,117,744],function(){return e(e.s=936)}),_N_E=e.O()}]);